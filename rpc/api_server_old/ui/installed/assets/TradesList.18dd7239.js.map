{"version":3,"file":"TradesList.18dd7239.js","sources":["../../src/components/ftbot/CustomTradeListEntry.vue","../../src/components/ftbot/CustomTradeList.vue","../../node_modules/vue-material-design-icons/ArrowLeft.vue","../../src/views/TradesList.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex\">\n    <div\n      class=\"px-1 d-flex flex-row flex-fill text-left justify-content-between align-items-center\"\n    >\n      <span>\n        <span class=\"mr-1 font-weight-bold\">{{ trade.pair }}</span>\n        <small class=\"text-secondary\">(#{{ trade.trade_id }})</small>\n      </span>\n      <small>\n        <DateTimeTZ :date=\"trade.open_timestamp\" :date-only=\"true\" />\n      </small>\n    </div>\n    <trade-profit class=\"col-5\" :trade=\"trade\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { formatPercent, formatPrice } from '@/shared/formatters';\nimport { Trade } from '@/types';\nimport DateTimeTZ from '@/components/general/DateTimeTZ.vue';\nimport TradeProfit from './TradeProfit.vue';\n\nexport default defineComponent({\n  components: {\n    DateTimeTZ,\n    TradeProfit,\n  },\n  props: {\n    trade: {\n      type: Object as () => Trade,\n      required: true,\n    },\n    stakeCurrencyDecimals: {\n      type: Number,\n      required: true,\n    },\n    showDetails: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup() {\n    return {\n      formatPrice,\n      formatPercent,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.card-body {\n  padding: 0 0.2em;\n}\n.table-sm {\n  font-size: $fontsize-small;\n}\n.btn-xs {\n  padding: 0.1rem 0.25rem;\n  font-size: 0.75rem;\n}\n</style>\n","<template>\n  <div class=\"h-100 overflow-auto p-1\">\n    <b-list-group id=\"tradeList\">\n      <b-list-group-item\n        v-for=\"trade in filteredTrades\"\n        :key=\"trade.trade_id\"\n        class=\"border border-secondary rounded my-05 px-1\"\n        @click=\"tradeClick(trade)\"\n      >\n        <CustomTradeListEntry :trade=\"trade\" :stake-currency-decimals=\"stakeCurrencyDecimals\" />\n      </b-list-group-item>\n    </b-list-group>\n\n    <span v-if=\"trades.length == 0\" class=\"mt-5\">{{ emptyText }}</span>\n\n    <div class=\"w-100 d-flex justify-content-between mt-1\">\n      <b-pagination\n        v-if=\"!activeTrades\"\n        v-model=\"currentPage\"\n        :total-rows=\"rows\"\n        :per-page=\"perPage\"\n        aria-controls=\"tradeList\"\n      ></b-pagination>\n      <b-input\n        v-if=\"showFilter\"\n        v-model=\"filterText\"\n        type=\"text\"\n        placeholder=\"Filter\"\n        size=\"sm\"\n        style=\"width: unset\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { formatPrice } from '@/shared/formatters';\nimport { MultiDeletePayload, MultiForcesellPayload, Trade } from '@/types';\nimport CustomTradeListEntry from '@/components/ftbot/CustomTradeListEntry.vue';\nimport { defineComponent, computed, ref, getCurrentInstance } from 'vue';\nimport { useBotStore } from '@/stores/ftbotwrapper';\n\nexport default defineComponent({\n  name: 'CustomTradeList',\n  components: {\n    CustomTradeListEntry,\n  },\n  props: {\n    trades: { required: true, type: Array as () => Trade[] },\n    title: { default: 'Trades', type: String },\n    stakeCurrency: { required: false, default: '', type: String },\n    activeTrades: { default: false, type: Boolean },\n    showFilter: { default: false, type: Boolean },\n    multiBotView: { default: false, type: Boolean },\n    emptyText: { default: 'No Trades to show.', type: String },\n    stakeCurrencyDecimals: { default: 3, type: Number },\n  },\n  setup(props) {\n    const root = getCurrentInstance();\n    const botStore = useBotStore();\n    const currentPage = ref(1);\n    const filterText = ref('');\n    const perPage = props.activeTrades ? 200 : 25;\n\n    const rows = computed(() => props.trades.length);\n\n    const filteredTrades = computed(() => {\n      return props.trades.slice((currentPage.value - 1) * perPage, currentPage.value * perPage);\n    });\n    const formatPriceWithDecimals = (price) => {\n      return formatPrice(price, props.stakeCurrencyDecimals);\n    };\n    const forcesellHandler = (item: Trade, ordertype: string | undefined = undefined) => {\n      root?.proxy.$bvModal\n        .msgBoxConfirm(`Really forcesell trade ${item.trade_id} (Pair ${item.pair})?`)\n        .then((value: boolean) => {\n          if (value) {\n            const payload: MultiForcesellPayload = {\n              tradeid: String(item.trade_id),\n              botId: item.botId,\n            };\n            if (ordertype) {\n              payload.ordertype = ordertype;\n            }\n            botStore\n              .forceSellMulti(payload)\n              .then((xxx) => console.log(xxx))\n              .catch((error) => console.log(error.response));\n          }\n        });\n    };\n\n    const handleContextMenuEvent = (item, index, event) => {\n      // stop browser context menu from appearing\n      if (!props.activeTrades) {\n        return;\n      }\n      event.preventDefault();\n      // log the selected item to the console\n      console.log(item);\n    };\n\n    const removeTradeHandler = (item) => {\n      console.log(item);\n      root?.proxy.$bvModal\n        .msgBoxConfirm(`Really delete trade ${item.trade_id} (Pair ${item.pair})?`)\n        .then((value: boolean) => {\n          if (value) {\n            const payload: MultiDeletePayload = {\n              tradeid: String(item.trade_id),\n              botId: item.botId,\n            };\n            botStore.deleteTradeMulti(payload).catch((error) => console.log(error.response));\n          }\n        });\n    };\n    const tradeClick = (trade) => {\n      botStore.activeBot.setDetailTrade(trade);\n    };\n\n    return {\n      currentPage,\n      filterText,\n      perPage,\n      filteredTrades,\n      formatPriceWithDecimals,\n      forcesellHandler,\n      handleContextMenuEvent,\n      removeTradeHandler,\n      tradeClick,\n      botStore,\n      rows,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.my-05 {\n  margin-top: 0.125rem;\n  margin-bottom: 0.125rem;\n}\n</style>\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"!title\"\n        :aria-label=\"title\"\n        class=\"material-design-icon arrow-left-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"ArrowLeftIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <div>\n    <!-- <TradeList\n      class=\"open-trades\"\n      :trades=\"openTrades\"\n      title=\"Open trades\"\n      :active-trades=\"true\"\n      empty-text=\"Currently no open trades.\"\n    /> -->\n    <CustomTradeList\n      v-if=\"!history && !botStore.activeBot.detailTradeId\"\n      :trades=\"botStore.activeBot.openTrades\"\n      title=\"Open trades\"\n      :active-trades=\"true\"\n      :stake-currency-decimals=\"botStore.activeBot.stakeCurrencyDecimals\"\n      empty-text=\"No open Trades.\"\n    />\n    <CustomTradeList\n      v-if=\"history && !botStore.activeBot.detailTradeId\"\n      :trades=\"botStore.activeBot.closedTrades\"\n      title=\"Trade history\"\n      :stake-currency-decimals=\"botStore.activeBot.stakeCurrencyDecimals\"\n      empty-text=\"No closed trades so far.\"\n    />\n    <div v-if=\"botStore.activeBot.detailTradeId\" class=\"d-flex flex-column\">\n      <b-button\n        size=\"sm\"\n        class=\"align-self-start mt-1 ml-1\"\n        @click=\"botStore.activeBot.setDetailTrade(null)\"\n        ><BackIcon /> Back</b-button\n      >\n      <TradeDetail\n        :trade=\"botStore.activeBot.tradeDetail\"\n        :stake-currency=\"botStore.activeBot.stakeCurrency\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport CustomTradeList from '@/components/ftbot/CustomTradeList.vue';\nimport TradeDetail from '@/components/ftbot/TradeDetail.vue';\nimport BackIcon from 'vue-material-design-icons/ArrowLeft.vue';\nimport { defineComponent } from 'vue';\nimport { useBotStore } from '@/stores/ftbotwrapper';\n\nexport default defineComponent({\n  name: 'TradesList',\n  components: {\n    CustomTradeList,\n    TradeDetail,\n    BackIcon,\n  },\n  props: {\n    history: { default: false, type: Boolean },\n  },\n  setup() {\n    const botStore = useBotStore();\n\n    return {\n      botStore,\n    };\n  },\n});\n</script>\n\n<style scoped></style>\n"],"names":["ref","_sfc_main"],"mappings":"oOA0BA,GAAA,GAAA,EAAA,CACA,WAAA,CACA,aACA,aACA,EACA,MAAA,CACA,MAAA,CACA,KAAA,OACA,SAAA,EACA,EACA,sBAAA,CACA,KAAA,OACA,SAAA,EACA,EACA,YAAA,CACA,KAAA,QACA,QAAA,EACA,CACA,EACA,OAAA,CACA,MAAA,CACA,cACA,eAAA,CAEA,CACA,CAAA,8kBCTA,EAAA,EAAA,CACA,KAAA,kBACA,WAAA,CACA,sBACA,EACA,MAAA,CACA,OAAA,CAAA,SAAA,GAAA,KAAA,KAAA,EACA,MAAA,CAAA,QAAA,SAAA,KAAA,MAAA,EACA,cAAA,CAAA,SAAA,GAAA,QAAA,GAAA,KAAA,MAAA,EACA,aAAA,CAAA,QAAA,GAAA,KAAA,OAAA,EACA,WAAA,CAAA,QAAA,GAAA,KAAA,OAAA,EACA,aAAA,CAAA,QAAA,GAAA,KAAA,OAAA,EACA,UAAA,CAAA,QAAA,qBAAA,KAAA,MAAA,EACA,sBAAA,CAAA,QAAA,EAAA,KAAA,MAAA,CACA,EACA,MAAA,EAAA,CACA,KAAA,GAAA,IACA,EAAA,IACA,EAAAA,EAAA,CAAA,EACA,EAAAA,EAAA,EAAA,EACA,EAAA,EAAA,aAAA,IAAA,GAEA,EAAA,EAAA,IAAA,EAAA,OAAA,MAAA,EAEA,EAAA,EAAA,IACA,EAAA,OAAA,MAAA,GAAA,MAAA,GAAA,EAAA,EAAA,MAAA,CAAA,CACA,EAoDA,MAAA,CACA,cACA,aACA,UACA,iBACA,wBAxDA,AAAA,GACA,EAAA,EAAA,EAAA,qBAAA,EAwDA,iBAtDA,CAAA,EAAA,EAAA,SAAA,CACA,WAAA,MAAA,SACA,cAAA,0BAAA,EAAA,kBAAA,EAAA,UACA,KAAA,AAAA,GAAA,CACA,GAAA,EAAA,CACA,KAAA,GAAA,CACA,QAAA,OAAA,EAAA,QAAA,EACA,MAAA,EAAA,KAAA,EAEA,AAAA,GACA,GAAA,UAAA,GAEA,EACA,eAAA,CAAA,EACA,KAAA,AAAA,GAAA,QAAA,IAAA,CAAA,CAAA,EACA,MAAA,AAAA,GAAA,QAAA,IAAA,EAAA,QAAA,CAAA,CACA,CAAA,EACA,EAsCA,uBAnCA,CAAA,EAAA,EAAA,IAAA,CAEA,AAAA,CAAA,EAAA,cAGA,GAAA,eAAA,EAEA,QAAA,IAAA,CAAA,EAAA,EA6BA,mBA1BA,AAAA,GAAA,CACA,QAAA,IAAA,CAAA,EACA,WAAA,MAAA,SACA,cAAA,uBAAA,EAAA,kBAAA,EAAA,UACA,KAAA,AAAA,GAAA,CACA,GAAA,EAAA,CACA,KAAA,GAAA,CACA,QAAA,OAAA,EAAA,QAAA,EACA,MAAA,EAAA,KAAA,EAEA,EAAA,iBAAA,CAAA,EAAA,MAAA,AAAA,GAAA,QAAA,IAAA,EAAA,QAAA,CAAA,CACA,CAAA,EACA,EAeA,WAbA,AAAA,GAAA,CACA,EAAA,UAAA,eAAA,CAAA,CAAA,EAaA,WACA,MAAA,CAEA,CACA,CAAA,qjCClHA,KAAAC,GAAA,CACA,KAAA,gBACA,MAAA,CAAA,OAAA,EACA,MAAA,CACA,MAAA,CACA,KAAA,MACA,EACA,UAAA,CACA,KAAA,OACA,QAAA,cACA,EACA,KAAA,CACA,KAAA,OACA,QAAA,EACA,CACA,CACA,+jBCUA,EAAA,EAAA,CACA,KAAA,aACA,WAAA,CACA,kBACA,cACA,UACA,EACA,MAAA,CACA,QAAA,CAAA,QAAA,GAAA,KAAA,OAAA,CACA,EACA,OAAA,CAGA,MAAA,CACA,SAHA,GAGA,CAEA,CACA,CAAA"}