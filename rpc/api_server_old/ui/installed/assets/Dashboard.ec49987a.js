import{b as L}from"./numberformat.a1b2908a.js";import{d as v,u as S,c as n,n as x,b as T,r as D,o as k,f as u,H as c}from"./index.061ad1de.js";import{v as h,D as B,a as O}from"./DraggableContainer.e7798593.js";import{C as w,T as I}from"./TradesLog.b7033fbb.js";import{P as G}from"./TradeProfit.df90b345.js";import{T as P}from"./TradeList.07b4722a.js";import"./install.8ac9b939.js";import"./install.8bbcfb1f.js";var R=v({name:"BotComparisonList",components:{ProfitPill:G},setup(){const r=S(),t=[{key:"botName",label:"Bot"},{key:"trades",label:"Trades"},{key:"profitOpen",label:"Open Profit"},{key:"profitClosed",label:"Closed Profit"},{key:"balance",label:"Balance"},{key:"winVsLoss",label:"W/L"}],e=n(()=>{const a=[],i={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(r.allProfit).forEach(([s,o])=>{var m,p,y,f;const _=r.allOpenTrades[s].reduce((l,d)=>l+d.stake_amount,0),b=r.allOpenTrades[s].reduce((l,d)=>l+d.profit_ratio*d.stake_amount,0)/_,g=r.allOpenTrades[s].reduce((l,d)=>{var C;return l+((C=d.profit_abs)!=null?C:0)},0);a.push({botId:s,botName:r.availableBots[s].botName,trades:`${r.allOpenTradeCount[s]} / ${((m=r.allBotState[s])==null?void 0:m.max_open_trades)||"N/A"}`,profitClosed:o.profit_closed_coin,profitClosedRatio:o.profit_closed_ratio||0,stakeCurrency:((p=r.allBotState[s])==null?void 0:p.stake_currency)||"",profitOpenRatio:b,profitOpen:g,wins:o.winning_trades,losses:o.losing_trades,balance:(y=r.allBalance[s])==null?void 0:y.total,stakeCurrencyDecimals:((f=r.allBotState[s])==null?void 0:f.stake_currency_decimals)||3}),o.profit_closed_coin!==void 0&&(i.profitClosed+=o.profit_closed_coin,i.profitOpen+=o.profit_all_coin,i.wins+=o.winning_trades,i.losses+=o.losing_trades)}),a.push(i),a});return{formatPrice:L,tableFields:t,tableItems:e,botStore:r}}});var $=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("b-table",{ref:"tradesTable",attrs:{small:"",hover:"","show-empty":"","primary-key":"botId",items:t.tableItems,fields:t.tableFields},scopedSlots:t._u([{key:"cell(botName)",fn:function(a){return[e("div",{staticClass:"d-flex flex-row"},[a.item.botId&&t.botStore.botCount>1?e("b-form-checkbox",{attrs:{title:"Show bot in Dashboard"},model:{value:t.botStore.botStores[a.item.botId].isSelected,callback:function(i){t.$set(t.botStore.botStores[a.item.botId],"isSelected",i)},expression:"botStore.botStores[row.item.botId].isSelected"}}):t._e(),e("span",[t._v(t._s(a.value))])],1)]}},{key:"cell(profitOpen)",fn:function(a){return[a.item.profitOpen&&a.item.botId!="Summary"?e("profit-pill",{attrs:{"profit-ratio":a.item.profitOpenRatio,"profit-abs":a.item.profitOpen,"stake-currency":a.item.stakeCurrency}}):t._e()]}},{key:"cell(profitClosed)",fn:function(a){return[a.item.profitClosed&&a.item.botId!="Summary"?e("profit-pill",{attrs:{"profit-ratio":a.item.profitClosedRatio,"profit-abs":a.item.profitClosed,"stake-currency":a.item.stakeCurrency}}):t._e()]}},{key:"cell(balance)",fn:function(a){return[a.item.balance?e("div",[e("span",{attrs:{title:a.item.stakeCurrency}},[t._v(t._s(t.formatPrice(a.item.balance,a.item.stakeCurrencyDecimals))+" ")]),e("span",{staticClass:"text-small"},[t._v(t._s(a.item.stakeCurrency))])]):t._e()]}},{key:"cell(winVsLoss)",fn:function(a){return[a.item.losses!==void 0?e("div",[e("span",{staticClass:"text-profit"},[t._v(t._s(a.item.wins))]),t._v(" / "),e("span",{staticClass:"text-loss"},[t._v(t._s(a.item.losses))])]):t._e()]}}])})},A=[],N=x(R,$,A,!1,null,"db627c3d",null,null),F=N.exports,z=v({name:"Dashboard",components:{GridLayout:h.exports.GridLayout,GridItem:h.exports.GridItem,DailyChart:B,CumProfitChart:w,TradesLogChart:I,BotComparisonList:F,TradeList:P,DraggableContainer:O},setup(){const r=S(),t=T(),e=D(""),a=l=>{e.value=l},i=n(()=>["","sm","md","lg","xl"].includes(e.value)),s=n(()=>t.layoutLocked||!i),o=n(()=>i?t.dashboardLayout:[...t.getDashboardLayoutSm]),_=l=>{i&&(console.log("newlayout",l),console.log("saving dashboard"),t.dashboardLayout=l)},b=n(()=>u(o.value,c.dailyChart)),g=n(()=>u(o.value,c.botComparison)),m=n(()=>u(o.value,c.allOpenTrades)),p=n(()=>u(o.value,c.cumChartChart)),y=n(()=>u(o.value,c.tradesLogChart)),f=n(()=>({sm:t.getDashboardLayoutSm}));return k(async()=>{await r.allGetDaily({timescale:30}),r.activeBot.getOpenTrades(),r.activeBot.getProfit()}),{botStore:r,formatPrice:L,isLayoutLocked:s,layoutUpdatedEvent:_,breakpointChanged:a,gridLayout:o,gridLayoutDaily:b,gridLayoutBotComparison:g,gridLayoutAllOpenTrades:m,gridLayoutCumChart:p,gridLayoutTradesLogChart:y,responsiveGridLayouts:f}}});var E=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("GridLayout",{staticClass:"h-100 w-100",attrs:{"row-height":50,layout:t.gridLayout,"vertical-compact":!1,margin:[5,5],"responsive-layouts":t.responsiveGridLayouts,"is-resizable":!t.isLayoutLocked,"is-draggable":!t.isLayoutLocked,responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2}},on:{"layout-updated":t.layoutUpdatedEvent,"breakpoint-changed":t.breakpointChanged}},[e("GridItem",{attrs:{i:t.gridLayoutDaily.i,x:t.gridLayoutDaily.x,y:t.gridLayoutDaily.y,w:t.gridLayoutDaily.w,h:t.gridLayoutDaily.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}},[e("DraggableContainer",{attrs:{header:`Daily Profit ${t.botStore.botCount>1?"combined":""}`}},[t.botStore.allDailyStatsSelectedBots?e("DailyChart",{attrs:{"daily-stats":t.botStore.allDailyStatsSelectedBots,"show-title":!1}}):t._e()],1)],1),e("GridItem",{attrs:{i:t.gridLayoutBotComparison.i,x:t.gridLayoutBotComparison.x,y:t.gridLayoutBotComparison.y,w:t.gridLayoutBotComparison.w,h:t.gridLayoutBotComparison.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}},[e("DraggableContainer",{attrs:{header:"Bot comparison"}},[e("bot-comparison-list")],1)],1),e("GridItem",{attrs:{i:t.gridLayoutAllOpenTrades.i,x:t.gridLayoutAllOpenTrades.x,y:t.gridLayoutAllOpenTrades.y,w:t.gridLayoutAllOpenTrades.w,h:t.gridLayoutAllOpenTrades.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}},[e("DraggableContainer",{attrs:{header:"Open Trades"}},[e("trade-list",{attrs:{"active-trades":!0,trades:t.botStore.allOpenTradesSelectedBots,"multi-bot-view":""}})],1)],1),e("GridItem",{attrs:{i:t.gridLayoutCumChart.i,x:t.gridLayoutCumChart.x,y:t.gridLayoutCumChart.y,w:t.gridLayoutCumChart.w,h:t.gridLayoutCumChart.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}},[e("DraggableContainer",{attrs:{header:"Cumulative Profit"}},[e("CumProfitChart",{attrs:{trades:t.botStore.allTradesSelectedBots,"show-title":!1}})],1)],1),e("GridItem",{attrs:{i:t.gridLayoutTradesLogChart.i,x:t.gridLayoutTradesLogChart.x,y:t.gridLayoutTradesLogChart.y,w:t.gridLayoutTradesLogChart.w,h:t.gridLayoutTradesLogChart.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}},[e("DraggableContainer",{attrs:{header:"Trades Log"}},[e("TradesLogChart",{attrs:{trades:t.botStore.allTradesSelectedBots,"show-title":!1}})],1)],1)],1)},U=[],V=x(z,E,U,!1,null,"2176bd2b",null,null),X=V.exports;export{X as default};
//# sourceMappingURL=Dashboard.ec49987a.js.map
