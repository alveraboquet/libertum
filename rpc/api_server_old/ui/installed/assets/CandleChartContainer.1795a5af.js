var Na=Object.defineProperty,za=Object.defineProperties;var Ra=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var Ea=Object.prototype.hasOwnProperty,$a=Object.prototype.propertyIsEnumerable;var ft=(n,e,t)=>e in n?Na(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,q=(n,e)=>{for(var t in e||(e={}))Ea.call(e,t)&&ft(n,t,e[t]);if(pt)for(var t of pt(e))$a.call(e,t)&&ft(n,t,e[t]);return n},vt=(n,e)=>za(n,Ra(e));import{d as Te,r as R,c as $,o as Je,w as X,n as Pe,C as Ie,u as Qt,E as Ve,h as Fe,s as Va,e as Fa,i as Wa,L as ve,g as Za}from"./index.061ad1de.js";import{f as ea}from"./numberformat.a1b2908a.js";import{_ as z,a9 as ta,B as Qe,j as et,ab as Ce,ac as aa,t as na,a3 as ra,u as tt,E as D,a4 as Y,ad as Q,ae as ee,Q as W,af as oa,ag as ja,f as ia,g as de,ah as Ga,a5 as j,ai as We,aj as Ha,ak as sa,al as Ua,N as U,U as le,am as gt,an as Ya,ao as qa,H as Ka,J as Xa,V as Ja,W as Qa,ap as la,aq as ye,ar as ua,v as Se,as as Le,at as en,r as Ze,au as tn,av as at,aw as an,ax as nn,ay as te,az as rn,p as be,Z as ie,aA as se,aB as mt,aC as nt,aD as on,L as ca,aE as sn,aF as ln,aG as yt,aH as bt,aI as da,aJ as un,aK as cn,aL as dn,aM as hn,aN as pn,I as _e,aO as rt,aP as fn,x as vn,aQ as gn,aR as _t,o as ha,aS as pa,aT as mn,aU as yn,aV as bn,aW as _n,aX as xn,aY as Cn,aZ as Sn,a_ as wn,a$ as An,b0 as xt,b1 as Tn,b2 as Ct,b3 as ke,R as Pn,b4 as Dn,b5 as On,b6 as In,b7 as Ln,b8 as kn,b9 as Mn,ba as Bn,bb as Nn,bc as zn,a as Rn,b as En,c as $n,d as Vn,i as Fn,C as Wn}from"./install.8bbcfb1f.js";import{d as Zn,p as fa,S as jn,e as Gn,t as Hn,r as Un,f as Yn,D as qn,h as Kn,j as Xn,s as Jn,A as Qn,k as er,b as tr,c as ar,l as nr,i as rr,a as or,m as ir,n as sr}from"./install.8ac9b939.js";import{c as lr}from"./createSeriesDataSimply.e9534da9.js";var ur=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,a){return Zn(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t==null?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t==null?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,a,r){return r.point(a.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(ta),cr=ur,va=4,dr=function(){function n(){}return n}(),hr=function(n){z(e,n);function e(t){var a=n.call(this,t)||this;return a._off=0,a.hoverDataIdx=-1,a}return e.prototype.getDefaultShape=function(){return new dr},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,a){var r=a.points,o=a.size,i=this.symbolProxy,s=i.shape,u=t.getContext?t.getContext():t,c=u&&o[0]<va,d=this.softClipShape,h;if(c){this._ctx=u;return}for(this._ctx=null,h=this._off;h<r.length;){var p=r[h++],y=r[h++];isNaN(p)||isNaN(y)||d&&!d.contain(p,y)||(s.x=p-o[0]/2,s.y=y-o[1]/2,s.width=o[0],s.height=o[1],i.buildPath(t,s,!0))}this.incremental&&(this._off=h,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,a=t.points,r=t.size,o=this._ctx,i=this.softClipShape,s;if(!!o){for(s=this._off;s<a.length;){var u=a[s++],c=a[s++];isNaN(u)||isNaN(c)||i&&!i.contain(u,c)||o.fillRect(u-r[0]/2,c-r[1]/2,r[0],r[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(t,a){for(var r=this.shape,o=r.points,i=r.size,s=Math.max(i[0],4),u=Math.max(i[1],4),c=o.length/2-1;c>=0;c--){var d=c*2,h=o[d]-s/2,p=o[d+1]-u/2;if(t>=h&&a>=p&&t<=h+s&&a<=p+u)return c}return-1},e.prototype.contain=function(t,a){var r=this.transformCoordToLocal(t,a),o=this.getBoundingRect();if(t=r[0],a=r[1],o.contain(t,a)){var i=this.hoverDataIdx=this.findDataIndex(t,a);return i>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var a=this.shape,r=a.points,o=a.size,i=o[0],s=o[1],u=1/0,c=1/0,d=-1/0,h=-1/0,p=0;p<r.length;){var y=r[p++],g=r[p++];u=Math.min(y,u),d=Math.max(y,d),c=Math.min(g,c),h=Math.max(g,h)}t=this._rect=new Qe(u-i/2,c-s/2,d-u+i,h-c+s)}return t},e}(et),pr=function(){function n(){this.group=new Ce}return n.prototype.updateData=function(e,t){this._clear();var a=this._create();a.setShape({points:e.getLayout("points")}),this._setCommon(a,e,t)},n.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var r=(a.endIndex-a.startIndex)*2,o=a.startIndex*4*2;t=new Float32Array(t.buffer,o,r)}a.setShape("points",t),a.reset()})},n.prototype.incrementalPrepareUpdate=function(e){this._clear()},n.prototype.incrementalUpdate=function(e,t,a){var r=this._newAdded[0],o=t.getLayout("points"),i=r&&r.shape.points;if(i&&i.length<2e4){var s=i.length,u=new Float32Array(s+o.length);u.set(i),u.set(o,s),r.endIndex=e.end,r.setShape({points:u})}else{this._newAdded=[];var c=this._create();c.startIndex=e.start,c.endIndex=e.end,c.incremental=!0,c.setShape({points:o}),this._setCommon(c,t,a)}},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new hr({cursor:"default"});return this.group.add(e),this._newAdded.push(e),e},n.prototype._setCommon=function(e,t,a){var r=t.hostModel;a=a||{};var o=t.getVisual("symbolSize");e.setShape("size",o instanceof Array?o:[o,o]),e.softClipShape=a.clipShape||null,e.symbolProxy=aa(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var i=e.shape.size[0]<va;e.useStyle(r.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),u=s&&s.fill;u&&e.setColor(u);var c=na(e);c.seriesIndex=r.seriesIndex,e.on("mousemove",function(d){c.dataIndex=null;var h=e.hoverDataIdx;h>=0&&(c.dataIndex=h+(e.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),fr=pr,vr=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,r){var o=t.getData(),i=this._updateSymbolDraw(o,t);i.updateData(o,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,a,r){var o=t.getData(),i=this._updateSymbolDraw(o,t);i.incrementalPrepareUpdate(o),this._finished=!1},e.prototype.incrementalRender=function(t,a,r){this._symbolDraw.incrementalUpdate(t,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=t.end===a.getData().count()},e.prototype.updateTransform=function(t,a,r){var o=t.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var i=fa("").reset(t,a,r);i.progress&&i.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){var a=t.coordinateSystem,r=a&&a.getArea&&a.getArea();return t.get("clip",!0)?r:null},e.prototype._updateSymbolDraw=function(t,a){var r=this._symbolDraw,o=a.pipelineContext,i=o.large;return(!r||i!==this._isLargeDraw)&&(r&&r.remove(),r=this._symbolDraw=i?new fr:new jn,this._isLargeDraw=i,this.group.removeAll()),this.group.add(r.group),r},e.prototype.remove=function(t,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(ra),gr=vr;function mr(n){tt(Gn),n.registerSeriesModel(cr),n.registerChartView(gr),n.registerLayout(fa("scatter"))}var yr={axisPointer:1,tooltip:1,brush:1};function br(n,e,t){var a=e.getComponentByElement(n.topTarget),r=a&&a.coordinateSystem;return a&&a!==t&&!yr.hasOwnProperty(a.mainType)&&r&&r.model!==t}var re=!0,xe=Math.min,ue=Math.max,_r=Math.pow,xr=1e4,Cr=6,Sr=6,St="globalPan",wr={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Ar={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},wt={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Tr=0,Pr=function(n){z(e,n);function e(t){var a=n.call(this)||this;return a._track=[],a._covers=[],a._handlers={},a._zr=t,a.group=new Ce,a._uid="brushController_"+Tr++,D(Br,function(r,o){this._handlers[o]=Y(r,this)},a),a}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var a=this._zr;this._enableGlobalPan||Hn(a,St,this._uid),D(this._handlers,function(r,o){a.on(o,r)}),this._brushType=t.brushType,this._brushOption=Q(ee(wt),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Un(t,St,this._uid),D(this._handlers,function(a,r){t.off(r,a)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var a=this._panels={};D(t,function(r){a[r.panelId]=ee(r)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var a=this.group;return this._zr.add(a),a.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=a.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=W(t,function(p){return Q(ee(wt),p,!0)});var a="\0-brush-index-",r=this._covers,o=this._covers=[],i=this,s=this._creatingCover;return new oa(r,t,c,u).add(d).update(d).remove(h).execute(),this;function u(p,y){return(p.id!=null?p.id:a+y)+"-"+p.brushType}function c(p,y){return u(p.__brushOption,y)}function d(p,y){var g=t[p];if(y!=null&&r[y]===s)o[p]=r[y];else{var m=o[p]=y!=null?(r[y].__brushOption=g,r[y]):ma(i,ga(i,g));ot(i,m)}}function h(p){r[p]!==s&&i.group.remove(r[p])}},e.prototype.unmount=function(){return this.enableBrush(!1),je(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(ja);function ga(n,e){var t=De[e.brushType].createCover(n,e);return t.__brushOption=e,ba(t,e),n.group.add(t),t}function ma(n,e){var t=it(e);return t.endCreating&&(t.endCreating(n,e),ba(e,e.__brushOption)),e}function ya(n,e){var t=e.__brushOption;it(e).updateCoverShape(n,e,t.range,t)}function ba(n,e){var t=e.z;t==null&&(t=xr),n.traverse(function(a){a.z=t,a.z2=t})}function ot(n,e){it(e).updateCommon(n,e),ya(n,e)}function it(n){return De[n.__brushOption.brushType]}function st(n,e,t){var a=n._panels;if(!a)return re;var r,o=n._transform;return D(a,function(i){i.isTargetByCursor(e,t,o)&&(r=i)}),r}function _a(n,e){var t=n._panels;if(!t)return re;var a=e.__brushOption.panelId;return a!=null?t[a]:re}function je(n){var e=n._covers,t=e.length;return D(e,function(a){n.group.remove(a)},n),e.length=0,!!t}function oe(n,e){var t=W(n._covers,function(a){var r=a.__brushOption,o=ee(r.range);return{brushType:r.brushType,panelId:r.panelId,range:o}});n.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Dr(n){var e=n._track;if(!e.length)return!1;var t=e[e.length-1],a=e[0],r=t[0]-a[0],o=t[1]-a[1],i=_r(r*r+o*o,.5);return i>Cr}function xa(n){var e=n.length-1;return e<0&&(e=0),[n[0],n[e]]}function Ca(n,e,t,a){var r=new Ce;return r.add(new We({name:"main",style:lt(t),silent:!0,draggable:!0,cursor:"move",drift:j(At,n,e,r,["n","s","w","e"]),ondragend:j(oe,e,{isEnd:!0})})),D(a,function(o){r.add(new We({name:o.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:j(At,n,e,r,o),ondragend:j(oe,e,{isEnd:!0})}))}),r}function Sa(n,e,t,a){var r=a.brushStyle.lineWidth||0,o=ue(r,Sr),i=t[0][0],s=t[1][0],u=i-r/2,c=s-r/2,d=t[0][1],h=t[1][1],p=d-o+r/2,y=h-o+r/2,g=d-i,m=h-s,b=g+r,_=m+r;K(n,e,"main",i,s,g,m),a.transformable&&(K(n,e,"w",u,c,o,_),K(n,e,"e",p,c,o,_),K(n,e,"n",u,c,b,o),K(n,e,"s",u,y,b,o),K(n,e,"nw",u,c,o,o),K(n,e,"ne",p,c,o,o),K(n,e,"sw",u,y,o,o),K(n,e,"se",p,y,o,o))}function Ge(n,e){var t=e.__brushOption,a=t.transformable,r=e.childAt(0);r.useStyle(lt(t)),r.attr({silent:!a,cursor:a?"move":"default"}),D([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(o){var i=e.childOfName(o.join("")),s=o.length===1?He(n,o[0]):Ir(n,o);i&&i.attr({silent:!a,invisible:!a,cursor:a?Ar[s]+"-resize":null})})}function K(n,e,t,a,r,o,i){var s=e.childOfName(t);s&&s.setShape(kr(ut(n,e,[[a,r],[a+o,r+i]])))}function lt(n){return de({strokeNoScale:!0},n.brushStyle)}function wa(n,e,t,a){var r=[xe(n,t),xe(e,a)],o=[ue(n,t),ue(e,a)];return[[r[0],o[0]],[r[1],o[1]]]}function Or(n){return sa(n.group)}function He(n,e){var t={w:"left",e:"right",n:"top",s:"bottom"},a={left:"w",right:"e",top:"n",bottom:"s"},r=Ha(t[e],Or(n));return a[r]}function Ir(n,e){var t=[He(n,e[0]),He(n,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function At(n,e,t,a,r,o){var i=t.__brushOption,s=n.toRectRange(i.range),u=Aa(e,r,o);D(a,function(c){var d=wr[c];s[d[0]][d[1]]+=u[d[0]]}),i.range=n.fromRectRange(wa(s[0][0],s[1][0],s[0][1],s[1][1])),ot(e,t),oe(e,{isEnd:!1})}function Lr(n,e,t,a){var r=e.__brushOption.range,o=Aa(n,t,a);D(r,function(i){i[0]+=o[0],i[1]+=o[1]}),ot(n,e),oe(n,{isEnd:!1})}function Aa(n,e,t){var a=n.group,r=a.transformCoordToLocal(e,t),o=a.transformCoordToLocal(0,0);return[r[0]-o[0],r[1]-o[1]]}function ut(n,e,t){var a=_a(n,e);return a&&a!==re?a.clipPath(t,n._transform):ee(t)}function kr(n){var e=xe(n[0][0],n[1][0]),t=xe(n[0][1],n[1][1]),a=ue(n[0][0],n[1][0]),r=ue(n[0][1],n[1][1]);return{x:e,y:t,width:a-e,height:r-t}}function Mr(n,e,t){if(!(!n._brushType||Nr(n,e.offsetX,e.offsetY))){var a=n._zr,r=n._covers,o=st(n,e,t);if(!n._dragging)for(var i=0;i<r.length;i++){var s=r[i].__brushOption;if(o&&(o===re||s.panelId===o.panelId)&&De[s.brushType].contain(r[i],t[0],t[1]))return}o&&a.setCursorStyle("crosshair")}}function Ue(n){var e=n.event;e.preventDefault&&e.preventDefault()}function Ye(n,e,t){return n.childOfName("main").contain(e,t)}function Ta(n,e,t,a){var r=n._creatingCover,o=n._creatingPanel,i=n._brushOption,s;if(n._track.push(t.slice()),Dr(n)||r){if(o&&!r){i.brushMode==="single"&&je(n);var u=ee(i);u.brushType=Tt(u.brushType,o),u.panelId=o===re?null:o.panelId,r=n._creatingCover=ga(n,u),n._covers.push(r)}if(r){var c=De[Tt(n._brushType,o)],d=r.__brushOption;d.range=c.getCreatingRange(ut(n,r,n._track)),a&&(ma(n,r),c.updateCommon(n,r)),ya(n,r),s={isEnd:a}}}else a&&i.brushMode==="single"&&i.removeOnClick&&st(n,e,t)&&je(n)&&(s={isEnd:a,removeOnClick:!0});return s}function Tt(n,e){return n==="auto"?e.defaultBrushType:n}var Br={mousedown:function(n){if(this._dragging)Pt(this,n);else if(!n.target||!n.target.draggable){Ue(n);var e=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var t=this._creatingPanel=st(this,n,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(n){var e=n.offsetX,t=n.offsetY,a=this.group.transformCoordToLocal(e,t);if(Mr(this,n,a),this._dragging){Ue(n);var r=Ta(this,n,a,!1);r&&oe(this,r)}},mouseup:function(n){Pt(this,n)}};function Pt(n,e){if(n._dragging){Ue(e);var t=e.offsetX,a=e.offsetY,r=n.group.transformCoordToLocal(t,a),o=Ta(n,e,r,!0);n._dragging=!1,n._track=[],n._creatingCover=null,o&&oe(n,o)}}function Nr(n,e,t){var a=n._zr;return e<0||e>a.getWidth()||t<0||t>a.getHeight()}var De={lineX:Dt(0),lineY:Dt(1),rect:{createCover:function(n,e){function t(a){return a}return Ca({toRectRange:t,fromRectRange:t},n,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var e=xa(n);return wa(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(n,e,t,a){Sa(n,e,t,a)},updateCommon:Ge,contain:Ye},polygon:{createCover:function(n,e){var t=new Ce;return t.add(new ia({name:"main",style:lt(e),silent:!0})),t},getCreatingRange:function(n){return n},endCreating:function(n,e){e.remove(e.childAt(0)),e.add(new Ga({name:"main",draggable:!0,drift:j(Lr,n,e),ondragend:j(oe,n,{isEnd:!0})}))},updateCoverShape:function(n,e,t,a){e.childAt(0).setShape({points:ut(n,e,t)})},updateCommon:Ge,contain:Ye}};function Dt(n){return{createCover:function(e,t){return Ca({toRectRange:function(a){var r=[a,[0,100]];return n&&r.reverse(),r},fromRectRange:function(a){return a[n]}},e,t,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(e){var t=xa(e),a=xe(t[0][n],t[1][n]),r=ue(t[0][n],t[1][n]);return[a,r]},updateCoverShape:function(e,t,a,r){var o,i=_a(e,t);if(i!==re&&i.getLinearBrushOtherExtent)o=i.getLinearBrushOtherExtent(n);else{var s=e._zr;o=[0,[s.getWidth(),s.getHeight()][1-n]]}var u=[a,o];n&&u.reverse(),Sa(e,t,u,r)},updateCommon:Ge,contain:Ye}}var zr=Pr;function Rr(n){return n=ct(n),function(e){return Ua(e,n)}}function Er(n,e){return n=ct(n),function(t){var a=e!=null?e:t,r=a?n.width:n.height,o=a?n.x:n.y;return[o,o+(r||0)]}}function $r(n,e,t){var a=ct(n);return function(r,o){return a.contain(o[0],o[1])&&!br(r,e,t)}}function ct(n){return Qe.create(n)}var Vr=function(){function n(){}return n.prototype.getInitialData=function(e,t){var a,r=t.getComponent("xAxis",this.get("xAxisIndex")),o=t.getComponent("yAxis",this.get("yAxisIndex")),i=r.get("type"),s=o.get("type"),u;i==="category"?(e.layout="horizontal",a=r.getOrdinalMeta(),u=!0):s==="category"?(e.layout="vertical",a=o.getOrdinalMeta(),u=!0):e.layout=e.layout||"horizontal";var c=["x","y"],d=e.layout==="horizontal"?0:1,h=this._baseAxisDim=c[d],p=c[1-d],y=[r,o],g=y[d].get("type"),m=y[1-d].get("type"),b=e.data;if(b&&u){var _=[];D(b,function(x,P){var T;U(x)?(T=x.slice(),x.unshift(P)):U(x.value)?(T=le({},x),T.value=T.value.slice(),x.value.unshift(P)):T=x,_.push(T)}),e.data=_}var C=this.defaultValueDimensions,S=[{name:h,type:gt(g),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:gt(m),dimsDef:C.slice()}];return lr(this,{coordDimensions:S,dimensionsCount:C.length+1,encodeDefaulter:j(Ya,S,this)})},n.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},n}(),Fr=["color","borderColor"],Wr=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,r){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,a,r){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,a,r,o){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,a):this._incrementalRenderNormal(t,a)},e.prototype.eachRendered=function(t){qa(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var a=t.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},e.prototype._renderNormal=function(t){var a=t.getData(),r=this._data,o=this.group,i=a.getLayout("isSimpleBox"),s=t.get("clip",!0),u=t.coordinateSystem,c=u.getArea&&u.getArea();this._data||o.removeAll(),a.diff(r).add(function(d){if(a.hasValue(d)){var h=a.getItemLayout(d);if(s&&Ot(c,h))return;var p=Me(h,d,!0);Ka(p,{shape:{points:h.ends}},t,d),Be(p,a,d,i),o.add(p),a.setItemGraphicEl(d,p)}}).update(function(d,h){var p=r.getItemGraphicEl(h);if(!a.hasValue(d)){o.remove(p);return}var y=a.getItemLayout(d);if(s&&Ot(c,y)){o.remove(p);return}p?(Xa(p,{shape:{points:y.ends}},t,d),Ja(p)):p=Me(y),Be(p,a,d,i),o.add(p),a.setItemGraphicEl(d,p)}).remove(function(d){var h=r.getItemGraphicEl(d);h&&o.remove(h)}).execute(),this._data=a},e.prototype._renderLarge=function(t){this._clear(),Lt(t,this.group);var a=t.get("clip",!0)?Yn(t.coordinateSystem,!1,t):null;a?this.group.setClipPath(a):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,a){for(var r=a.getData(),o=r.getLayout("isSimpleBox"),i;(i=t.next())!=null;){var s=r.getItemLayout(i),u=Me(s);Be(u,r,i,o),u.incremental=!0,this.group.add(u),this._progressiveEls.push(u)}},e.prototype._incrementalRenderLarge=function(t,a){Lt(a,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(ra),Zr=function(){function n(){}return n}(),jr=function(n){z(e,n);function e(t){var a=n.call(this,t)||this;return a.type="normalCandlestickBox",a}return e.prototype.getDefaultShape=function(){return new Zr},e.prototype.buildPath=function(t,a){var r=a.points;this.__simpleBox?(t.moveTo(r[4][0],r[4][1]),t.lineTo(r[6][0],r[6][1])):(t.moveTo(r[0][0],r[0][1]),t.lineTo(r[1][0],r[1][1]),t.lineTo(r[2][0],r[2][1]),t.lineTo(r[3][0],r[3][1]),t.closePath(),t.moveTo(r[4][0],r[4][1]),t.lineTo(r[5][0],r[5][1]),t.moveTo(r[6][0],r[6][1]),t.lineTo(r[7][0],r[7][1]))},e}(et);function Me(n,e,t){var a=n.ends;return new jr({shape:{points:t?Gr(a,n):a},z2:100})}function Ot(n,e){for(var t=!0,a=0;a<e.ends.length;a++)if(n.contain(e.ends[a][0],e.ends[a][1])){t=!1;break}return t}function Be(n,e,t,a){var r=e.getItemModel(t);n.useStyle(e.getItemVisual(t,"style")),n.style.strokeNoScale=!0,n.__simpleBox=a,Qa(n,r)}function Gr(n,e){return W(n,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var Hr=function(){function n(){}return n}(),It=function(n){z(e,n);function e(t){var a=n.call(this,t)||this;return a.type="largeCandlestickBox",a}return e.prototype.getDefaultShape=function(){return new Hr},e.prototype.buildPath=function(t,a){for(var r=a.points,o=0;o<r.length;)if(this.__sign===r[o++]){var i=r[o++];t.moveTo(i,r[o++]),t.lineTo(i,r[o++])}else o+=3},e}(et);function Lt(n,e,t,a){var r=n.getData(),o=r.getLayout("largePoints"),i=new It({shape:{points:o},__sign:1});e.add(i);var s=new It({shape:{points:o},__sign:-1});e.add(s),kt(1,i,n),kt(-1,s,n),a&&(i.incremental=!0,s.incremental=!0),t&&t.push(i,s)}function kt(n,e,t,a){var r=t.get(["itemStyle",n>0?"borderColor":"borderColor0"])||t.get(["itemStyle",n>0?"color":"color0"]),o=t.getModel("itemStyle").getItemStyle(Fr);e.useStyle(o),e.style.fill=null,e.style.stroke=r}var Ur=Wr,Pa=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,a,r){var o=a.getItemLayout(t);return o&&r.rect(o.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(ta);la(Pa,Vr,!0);var Yr=Pa;function qr(n){!n||!U(n.series)||D(n.series,function(e){ye(e)&&e.type==="k"&&(e.type="candlestick")})}var Kr=["itemStyle","borderColor"],Xr=["itemStyle","borderColor0"],Jr=["itemStyle","color"],Qr=["itemStyle","color0"],eo={seriesType:"candlestick",plan:ua(),performRawSeries:!0,reset:function(n,e){function t(o,i){return i.get(o>0?Jr:Qr)}function a(o,i){return i.get(o>0?Kr:Xr)}if(!e.isSeriesFiltered(n)){var r=n.pipelineContext.large;return!r&&{progress:function(o,i){for(var s;(s=o.next())!=null;){var u=i.getItemModel(s),c=i.getItemLayout(s).sign,d=u.getItemStyle();d.fill=t(c,u),d.stroke=a(c,u)||d.fill;var h=i.ensureUniqueItemVisual(s,"style");le(h,d)}}}}}},to=eo,ao={seriesType:"candlestick",plan:ua(),reset:function(n){var e=n.coordinateSystem,t=n.getData(),a=no(n,t),r=0,o=1,i=["x","y"],s=t.getDimensionIndex(t.mapDimension(i[r])),u=W(t.mapDimensionsAll(i[o]),t.getDimensionIndex,t),c=u[0],d=u[1],h=u[2],p=u[3];if(t.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),s<0||u.length<4)return;return{progress:n.pipelineContext.large?g:y};function y(m,b){for(var _,C=b.getStore();(_=m.next())!=null;){var S=C.get(s,_),x=C.get(c,_),P=C.get(d,_),T=C.get(h,_),O=C.get(p,_),B=Math.min(x,P),L=Math.max(x,P),l=k(B,S),f=k(L,S),v=k(T,S),w=k(O,S),I=[];Z(I,f,0),Z(I,l,1),I.push(V(w),V(f),V(v),V(l)),b.setItemLayout(_,{sign:Mt(C,_,x,P,d),initBaseline:x>P?f[o]:l[o],ends:I,brushRect:J(T,O,S)})}function k(M,A){var E=[];return E[r]=A,E[o]=M,isNaN(A)||isNaN(M)?[NaN,NaN]:e.dataToPoint(E)}function Z(M,A,E){var N=A.slice(),F=A.slice();N[r]=Le(N[r]+a/2,1,!1),F[r]=Le(F[r]-a/2,1,!0),E?M.push(N,F):M.push(F,N)}function J(M,A,E){var N=k(M,E),F=k(A,E);return N[r]-=a/2,F[r]-=a/2,{x:N[0],y:N[1],width:a,height:F[1]-N[1]}}function V(M){return M[r]=Le(M[r],1),M}}function g(m,b){for(var _=en(m.count*4),C=0,S,x=[],P=[],T,O=b.getStore();(T=m.next())!=null;){var B=O.get(s,T),L=O.get(c,T),l=O.get(d,T),f=O.get(h,T),v=O.get(p,T);if(isNaN(B)||isNaN(f)||isNaN(v)){_[C++]=NaN,C+=3;continue}_[C++]=Mt(O,T,L,l,d),x[r]=B,x[o]=f,S=e.dataToPoint(x,null,P),_[C++]=S?S[0]:NaN,_[C++]=S?S[1]:NaN,x[o]=v,S=e.dataToPoint(x,null,P),_[C++]=S?S[1]:NaN}b.setLayout("largePoints",_)}}};function Mt(n,e,t,a,r){var o;return t>a?o=-1:t<a?o=1:o=e>0?n.get(r,e-1)<=a?1:-1:1,o}function no(n,e){var t=n.getBaseAxis(),a,r=t.type==="category"?t.getBandWidth():(a=t.getExtent(),Math.abs(a[1]-a[0])/e.count()),o=Se(Ze(n.get("barMaxWidth"),r),r),i=Se(Ze(n.get("barMinWidth"),1),r),s=n.get("barWidth");return s!=null?Se(s,r):Math.max(Math.min(r/2,o),i)}var ro=ao;function oo(n){n.registerChartView(Ur),n.registerSeriesModel(Yr),n.registerPreprocessor(qr),n.registerVisual(to),n.registerLayout(ro)}var io=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,a,r){var o=tn(t);n.prototype.init.apply(this,arguments),Bt(t,o)},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),Bt(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(at);function Bt(n,e){var t=n.cellSize,a;U(t)?a=t:a=n.cellSize=[t,t],a.length===1&&(a[1]=a[0]);var r=W([0,1],function(o){return an(e,o)&&(a[o]="auto"),a[o]!=null&&a[o]!=="auto"});nn(n,e,{type:"box",ignoreSize:r})}var so=io,lo=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,r){var o=this.group;o.removeAll();var i=t.coordinateSystem,s=i.getRangeInfo(),u=i.getOrient(),c=a.getLocaleModel();this._renderDayRect(t,s,o),this._renderLines(t,s,u,o),this._renderYearText(t,s,u,o),this._renderMonthText(t,c,u,o),this._renderWeekText(t,c,s,u,o)},e.prototype._renderDayRect=function(t,a,r){for(var o=t.coordinateSystem,i=t.getModel("itemStyle").getItemStyle(),s=o.getCellWidth(),u=o.getCellHeight(),c=a.start.time;c<=a.end.time;c=o.getNextNDay(c,1).time){var d=o.dataToRect([c],!1).tl,h=new We({shape:{x:d[0],y:d[1],width:s,height:u},cursor:"default",style:i});r.add(h)}},e.prototype._renderLines=function(t,a,r,o){var i=this,s=t.coordinateSystem,u=t.getModel(["splitLine","lineStyle"]).getLineStyle(),c=t.get(["splitLine","show"]),d=u.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=a.start,p=0;h.time<=a.end.time;p++){g(h.formatedDate),p===0&&(h=s.getDateInfo(a.start.y+"-"+a.start.m));var y=h.date;y.setMonth(y.getMonth()+1),h=s.getDateInfo(y)}g(s.getNextNDay(a.end.time,1).formatedDate);function g(m){i._firstDayOfMonth.push(s.getDateInfo(m)),i._firstDayPoints.push(s.dataToRect([m],!1).tl);var b=i._getLinePointsOfOneWeek(t,m,r);i._tlpoints.push(b[0]),i._blpoints.push(b[b.length-1]),c&&i._drawSplitline(b,u,o)}c&&this._drawSplitline(i._getEdgesPoints(i._tlpoints,d,r),u,o),c&&this._drawSplitline(i._getEdgesPoints(i._blpoints,d,r),u,o)},e.prototype._getEdgesPoints=function(t,a,r){var o=[t[0].slice(),t[t.length-1].slice()],i=r==="horizontal"?0:1;return o[0][i]=o[0][i]-a/2,o[1][i]=o[1][i]+a/2,o},e.prototype._drawSplitline=function(t,a,r){var o=new ia({z2:20,shape:{points:t},style:a});r.add(o)},e.prototype._getLinePointsOfOneWeek=function(t,a,r){for(var o=t.coordinateSystem,i=o.getDateInfo(a),s=[],u=0;u<7;u++){var c=o.getNextNDay(i.time,u),d=o.dataToRect([c.time],!1);s[2*c.day]=d.tl,s[2*c.day+1]=d[r==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(t,a){return te(t)&&t?rn(t,a):be(t)?t(a):a.nameMap},e.prototype._yearTextPositionControl=function(t,a,r,o,i){var s=a[0],u=a[1],c=["center","bottom"];o==="bottom"?(u+=i,c=["center","top"]):o==="left"?s-=i:o==="right"?(s+=i,c=["center","top"]):u-=i;var d=0;return(o==="left"||o==="right")&&(d=Math.PI/2),{rotation:d,x:s,y:u,style:{align:c[0],verticalAlign:c[1]}}},e.prototype._renderYearText=function(t,a,r,o){var i=t.getModel("yearLabel");if(!!i.get("show")){var s=i.get("margin"),u=i.get("position");u||(u=r!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],d=(c[0][0]+c[1][0])/2,h=(c[0][1]+c[1][1])/2,p=r==="horizontal"?0:1,y={top:[d,c[p][1]],bottom:[d,c[1-p][1]],left:[c[1-p][0],h],right:[c[p][0],h]},g=a.start.y;+a.end.y>+a.start.y&&(g=g+"-"+a.end.y);var m=i.get("formatter"),b={start:a.start.y,end:a.end.y,nameMap:g},_=this._formatterLabel(m,b),C=new ie({z2:30,style:se(i,{text:_})});C.attr(this._yearTextPositionControl(C,y[u],r,u,s)),o.add(C)}},e.prototype._monthTextPositionControl=function(t,a,r,o,i){var s="left",u="top",c=t[0],d=t[1];return r==="horizontal"?(d=d+i,a&&(s="center"),o==="start"&&(u="bottom")):(c=c+i,a&&(u="middle"),o==="start"&&(s="right")),{x:c,y:d,align:s,verticalAlign:u}},e.prototype._renderMonthText=function(t,a,r,o){var i=t.getModel("monthLabel");if(!!i.get("show")){var s=i.get("nameMap"),u=i.get("margin"),c=i.get("position"),d=i.get("align"),h=[this._tlpoints,this._blpoints];(!s||te(s))&&(s&&(a=mt(s)||a),s=a.get(["time","monthAbbr"])||[]);var p=c==="start"?0:1,y=r==="horizontal"?0:1;u=c==="start"?-u:u;for(var g=d==="center",m=0;m<h[p].length-1;m++){var b=h[p][m].slice(),_=this._firstDayOfMonth[m];if(g){var C=this._firstDayPoints[m];b[y]=(C[y]+h[0][m+1][y])/2}var S=i.get("formatter"),x=s[+_.m-1],P={yyyy:_.y,yy:(_.y+"").slice(2),MM:_.m,M:+_.m,nameMap:x},T=this._formatterLabel(S,P),O=new ie({z2:30,style:le(se(i,{text:T}),this._monthTextPositionControl(b,g,r,c,u))});o.add(O)}}},e.prototype._weekTextPositionControl=function(t,a,r,o,i){var s="center",u="middle",c=t[0],d=t[1],h=r==="start";return a==="horizontal"?(c=c+o+(h?1:-1)*i[0]/2,s=h?"right":"left"):(d=d+o+(h?1:-1)*i[1]/2,u=h?"bottom":"top"),{x:c,y:d,align:s,verticalAlign:u}},e.prototype._renderWeekText=function(t,a,r,o,i){var s=t.getModel("dayLabel");if(!!s.get("show")){var u=t.coordinateSystem,c=s.get("position"),d=s.get("nameMap"),h=s.get("margin"),p=u.getFirstDayOfWeek();if(!d||te(d)){d&&(a=mt(d)||a);var y=a.get(["time","dayOfWeekShort"]);d=y||W(a.get(["time","dayOfWeekAbbr"]),function(P){return P[0]})}var g=u.getNextNDay(r.end.time,7-r.lweek).time,m=[u.getCellWidth(),u.getCellHeight()];h=Se(h,Math.min(m[1],m[0])),c==="start"&&(g=u.getNextNDay(r.start.time,-(7+r.fweek)).time,h=-h);for(var b=0;b<7;b++){var _=u.getNextNDay(g,b),C=u.dataToRect([_.time],!1).center,S=b;S=Math.abs((b+p)%7);var x=new ie({z2:30,style:le(se(s,{text:d[S]}),this._weekTextPositionControl(C,o,c,h,m))});i.add(x)}}},e.type="calendar",e}(nt),uo=lo,Ne=864e5,co=function(){function n(e,t,a){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=e}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(e){e=on(e);var t=e.getFullYear(),a=e.getMonth()+1,r=a<10?"0"+a:""+a,o=e.getDate(),i=o<10?"0"+o:""+o,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:r,d:i,day:s,time:e.getTime(),formatedDate:t+"-"+r+"-"+i,date:e}},n.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},n.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var a=this._rangeInfo.weeks||1,r=["width","height"],o=this._model.getCellSize().slice(),i=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[a,7]:[7,a];D([0,1],function(h){d(o,h)&&(i[r[h]]=o[h]*s[h])});var u={width:t.getWidth(),height:t.getHeight()},c=this._rect=ca(i,u);D([0,1],function(h){d(o,h)||(o[h]=c[r[h]]/s[h])});function d(h,p){return h[p]!=null&&h[p]!=="auto"}this._sw=o[0],this._sh=o[1]},n.prototype.dataToPoint=function(e,t){U(e)&&(e=e[0]),t==null&&(t=!0);var a=this.getDateInfo(e),r=this._rangeInfo,o=a.formatedDate;if(t&&!(a.time>=r.start.time&&a.time<r.end.time+Ne))return[NaN,NaN];var i=a.day,s=this._getRangeInfo([r.start.time,o]).nthWeek;return this._orient==="vertical"?[this._rect.x+i*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+i*this._sh+this._sh/2]},n.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},n.prototype.dataToRect=function(e,t){var a=this.dataToPoint(e,t);return{contentShape:{x:a[0]-(this._sw-this._lineWidth)/2,y:a[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:a,tl:[a[0]-this._sw/2,a[1]-this._sh/2],tr:[a[0]+this._sw/2,a[1]-this._sh/2],br:[a[0]+this._sw/2,a[1]+this._sh/2],bl:[a[0]-this._sw/2,a[1]+this._sh/2]}},n.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,a=Math.floor((e[1]-this._rect.y)/this._sh)+1,r=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(a,t-1,r):this._getDateByWeeksAndDay(t,a-1,r)},n.prototype.convertToPixel=function(e,t,a){var r=Nt(t);return r===this?r.dataToPoint(a):null},n.prototype.convertFromPixel=function(e,t,a){var r=Nt(t);return r===this?r.pointToData(a):null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if(U(e)&&e.length===1&&(e=e[0]),U(e))t=e;else{var a=e.toString();if(/^\d{4}$/.test(a)&&(t=[a+"-01-01",a+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(a)){var r=this.getDateInfo(a),o=r.date;o.setMonth(o.getMonth()+1);var i=this.getNextNDay(o,-1);t=[r.formatedDate,i.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(a)&&(t=[a,a])}if(!t)return e;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},n.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],a;t[0].time>t[1].time&&(a=!0,t.reverse());var r=Math.floor(t[1].time/Ne)-Math.floor(t[0].time/Ne)+1,o=new Date(t[0].time),i=o.getDate(),s=t[1].date.getDate();o.setDate(i+r-1);var u=o.getDate();if(u!==s)for(var c=o.getTime()-t[1].time>0?1:-1;(u=o.getDate())!==s&&(o.getTime()-t[1].time)*c>0;)r-=c,o.setDate(u-c);var d=Math.floor((r+t[0].day+6)/7),h=a?-d+1:d-1;return a&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:r,weeks:d,nthWeek:h,fweek:t[0].day,lweek:t[1].day}},n.prototype._getDateByWeeksAndDay=function(e,t,a){var r=this._getRangeInfo(a);if(e>r.weeks||e===0&&t<r.fweek||e===r.weeks&&t>r.lweek)return null;var o=(e-1)*7-r.fweek+t,i=new Date(r.start.time);return i.setDate(+r.start.d+o),this.getDateInfo(i)},n.create=function(e,t){var a=[];return e.eachComponent("calendar",function(r){var o=new n(r,e,t);a.push(o),r.coordinateSystem=o}),e.eachSeries(function(r){r.get("coordinateSystem")==="calendar"&&(r.coordinateSystem=a[r.get("calendarIndex")||0])}),a},n.dimensions=["time","value"],n}();function Nt(n){var e=n.calendarModel,t=n.seriesModel,a=e?e.coordinateSystem:t?t.coordinateSystem:null;return a}var ho=co;function po(n){n.registerComponentModel(so),n.registerComponentView(uo),n.registerCoordinateSystem("calendar",ho)}var fo=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(qn),vo=fo,go=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(Kn),mo=go;function yo(n){n.registerComponentModel(vo),n.registerComponentView(mo),Xn(n)}var H=function(){function n(){}return n}(),Da={};function ge(n,e){Da[n]=e}function Oa(n){return Da[n]}var bo=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;D(this.option.feature,function(a,r){var o=Oa(r);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(t)),Q(a,o.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(at),_o=bo,xo=function(n){z(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,a,r,o){var i=this.group;if(i.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),u=t.get("orient")==="vertical",c=t.get("feature")||{},d=this._features||(this._features={}),h=[];D(c,function(g,m){h.push(m)}),new oa(this._featureNames||[],h).add(p).update(p).remove(j(p,null)).execute(),this._featureNames=h;function p(g,m){var b=h[g],_=h[m],C=c[b],S=new sn(C,t,t.ecModel),x;if(o&&o.newTitle!=null&&o.featureName===b&&(C.title=o.newTitle),b&&!_){if(Co(b))x={onclick:S.option.onclick,featureName:b};else{var P=Oa(b);if(!P)return;x=new P}d[b]=x}else if(x=d[_],!x)return;x.uid=ln("toolbox-feature"),x.model=S,x.ecModel=a,x.api=r;var T=x instanceof H;if(!b&&_){T&&x.dispose&&x.dispose(a,r);return}if(!S.get("show")||T&&x.unusable){T&&x.remove&&x.remove(a,r);return}y(S,x,b),S.setIconStatus=function(O,B){var L=this.option,l=this.iconPaths;L.iconStatus=L.iconStatus||{},L.iconStatus[O]=B,l[O]&&(B==="emphasis"?yt:bt)(l[O])},x instanceof H&&x.render&&x.render(S,a,r,o)}function y(g,m,b){var _=g.getModel("iconStyle"),C=g.getModel(["emphasis","iconStyle"]),S=m instanceof H&&m.getIcons?m.getIcons():g.get("icon"),x=g.get("title")||{},P,T;te(S)?(P={},P[b]=S):P=S,te(x)?(T={},T[b]=x):T=x;var O=g.iconPaths={};D(P,function(B,L){var l=da(B,{},{x:-s/2,y:-s/2,width:s,height:s});l.setStyle(_.getItemStyle());var f=l.ensureState("emphasis");f.style=C.getItemStyle();var v=new ie({style:{text:T[L],align:C.get("textAlign"),borderRadius:C.get("textBorderRadius"),padding:C.get("textPadding"),fill:null},ignore:!0});l.setTextContent(v),un({el:l,componentModel:t,itemName:L,formatterParamsExtra:{title:T[L]}}),l.__title=T[L],l.on("mouseover",function(){var w=C.getItemStyle(),I=u?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";v.setStyle({fill:C.get("textFill")||w.fill||w.stroke||"#000",backgroundColor:C.get("textBackgroundColor")}),l.setTextConfig({position:C.get("textPosition")||I}),v.ignore=!t.get("showTitle"),r.enterEmphasis(this)}).on("mouseout",function(){g.get(["iconStatus",L])!=="emphasis"&&r.leaveEmphasis(this),v.hide()}),(g.get(["iconStatus",L])==="emphasis"?yt:bt)(l),i.add(l),l.on("click",Y(m.onclick,m,a,r,L)),O[L]=l})}cn(i,t,r),i.add(dn(i.getBoundingRect(),t)),u||i.eachChild(function(g){var m=g.__title,b=g.ensureState("emphasis"),_=b.textConfig||(b.textConfig={}),C=g.getTextContent(),S=C&&C.ensureState("emphasis");if(S&&!be(S)&&m){var x=S.style||(S.style={}),P=hn(m,ie.makeFont(x)),T=g.x+i.x,O=g.y+i.y+s,B=!1;O+P.height>r.getHeight()&&(_.position="top",B=!0);var L=B?-5-P.height:s+10;T+P.width/2>r.getWidth()?(_.position=["100%",L],x.align="right"):T-P.width/2<0&&(_.position=[0,L],x.align="left")}})},e.prototype.updateView=function(t,a,r,o){D(this._features,function(i){i instanceof H&&i.updateView&&i.updateView(i.model,a,r,o)})},e.prototype.remove=function(t,a){D(this._features,function(r){r instanceof H&&r.remove&&r.remove(t,a)}),this.group.removeAll()},e.prototype.dispose=function(t,a){D(this._features,function(r){r instanceof H&&r.dispose&&r.dispose(t,a)})},e.type="toolbox",e}(nt);function Co(n){return n.indexOf("my")===0}var So=xo,wo=function(n){z(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,a){var r=this.model,o=r.get("name")||t.get("title.0.text")||"echarts",i=a.getZr().painter.getType()==="svg",s=i?"svg":r.get("type",!0)||"png",u=a.getConnectedDataURL({type:s,backgroundColor:r.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:r.get("connectedBackgroundColor"),excludeComponents:r.get("excludeComponents"),pixelRatio:r.get("pixelRatio")}),c=pn.browser;if(be(MouseEvent)&&(c.newEdge||!c.ie&&!c.edge)){var d=document.createElement("a");d.download=o+"."+s,d.target="_blank",d.href=u;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});d.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||i){var p=u.split(","),y=p[0].indexOf("base64")>-1,g=i?decodeURIComponent(p[1]):p[1];y&&(g=window.atob(g));var m=o+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var b=g.length,_=new Uint8Array(b);b--;)_[b]=g.charCodeAt(b);var C=new Blob([_]);window.navigator.msSaveOrOpenBlob(C,m)}else{var S=document.createElement("iframe");document.body.appendChild(S);var x=S.contentWindow,P=x.document;P.open("image/svg+xml","replace"),P.write(g),P.close(),x.focus(),P.execCommand("SaveAs",!0,m),document.body.removeChild(S)}}else{var T=r.get("lang"),O='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(T&&T[0]||"")+'" /></body>',B=window.open();B.document.write(O),B.document.title=o}},e.getDefaultOption=function(t){var a={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return a},e}(H),Ao=wo,zt="__ec_magicType_stack__",To=[["line","bar"],["stack"]],Po=function(n){z(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,a=t.get("icon"),r={};return D(t.get("type"),function(o){a[o]&&(r[o]=a[o])}),r},e.getDefaultOption=function(t){var a={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return a},e.prototype.onclick=function(t,a,r){var o=this.model,i=o.get(["seriesIndex",r]);if(!!Rt[r]){var s={series:[]},u=function(h){var p=h.subType,y=h.id,g=Rt[r](p,y,h,o);g&&(de(g,h.option),s.series.push(g));var m=h.coordinateSystem;if(m&&m.type==="cartesian2d"&&(r==="line"||r==="bar")){var b=m.getAxesByScale("ordinal")[0];if(b){var _=b.dim,C=_+"Axis",S=h.getReferringComponents(C,fn).models[0],x=S.componentIndex;s[C]=s[C]||[];for(var P=0;P<=x;P++)s[C][x]=s[C][x]||{};s[C][x].boundaryGap=r==="bar"}}};D(To,function(h){_e(h,r)>=0&&D(h,function(p){o.setIconStatus(p,"normal")})}),o.setIconStatus(r,"emphasis"),t.eachComponent({mainType:"series",query:i==null?null:{seriesIndex:i}},u);var c,d=r;r==="stack"&&(c=Q({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),o.get(["iconStatus",r])!=="emphasis"&&(d="tiled")),a.dispatchAction({type:"changeMagicType",currentType:d,newOption:s,newTitle:c,featureName:"magicType"})}},e}(H),Rt={line:function(n,e,t,a){if(n==="bar")return Q({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},a.get(["option","line"])||{},!0)},bar:function(n,e,t,a){if(n==="line")return Q({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},a.get(["option","bar"])||{},!0)},stack:function(n,e,t,a){var r=t.get("stack")===zt;if(n==="line"||n==="bar")return a.setIconStatus("stack",r?"normal":"emphasis"),Q({id:e,stack:r?"":zt},a.get(["option","stack"])||{},!0)}};rt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,e){e.mergeOption(n.newOption)});var Do=Po,Oe=new Array(60).join("-"),ce="	";function Oo(n){var e={},t=[],a=[];return n.eachRawSeries(function(r){var o=r.coordinateSystem;if(o&&(o.type==="cartesian2d"||o.type==="polar")){var i=o.getBaseAxis();if(i.type==="category"){var s=i.dim+"_"+i.index;e[s]||(e[s]={categoryAxis:i,valueAxis:o.getOtherAxis(i),series:[]},a.push({axisDim:i.dim,axisIndex:i.index})),e[s].series.push(r)}else t.push(r)}else t.push(r)}),{seriesGroupByCategoryAxis:e,other:t,meta:a}}function Io(n){var e=[];return D(n,function(t,a){var r=t.categoryAxis,o=t.valueAxis,i=o.dim,s=[" "].concat(W(t.series,function(y){return y.name})),u=[r.model.getCategories()];D(t.series,function(y){var g=y.getRawData();u.push(y.getRawData().mapArray(g.mapDimension(i),function(m){return m}))});for(var c=[s.join(ce)],d=0;d<u[0].length;d++){for(var h=[],p=0;p<u.length;p++)h.push(u[p][d]);c.push(h.join(ce))}e.push(c.join(`
`))}),e.join(`

`+Oe+`

`)}function Lo(n){return W(n,function(e){var t=e.getRawData(),a=[e.name],r=[];return t.each(t.dimensions,function(){for(var o=arguments.length,i=arguments[o-1],s=t.getName(i),u=0;u<o-1;u++)r[u]=arguments[u];a.push((s?s+ce:"")+r.join(ce))}),a.join(`
`)}).join(`

`+Oe+`

`)}function ko(n){var e=Oo(n);return{value:vn([Io(e.seriesGroupByCategoryAxis),Lo(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+Oe+`

`),meta:e.meta}}function Ae(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Mo(n){var e=n.slice(0,n.indexOf(`
`));if(e.indexOf(ce)>=0)return!0}var qe=new RegExp("["+ce+"]+","g");function Bo(n){for(var e=n.split(/\n+/g),t=Ae(e.shift()).split(qe),a=[],r=W(t,function(u){return{name:u,data:[]}}),o=0;o<e.length;o++){var i=Ae(e[o]).split(qe);a.push(i.shift());for(var s=0;s<i.length;s++)r[s]&&(r[s].data[o]=i[s])}return{series:r,categories:a}}function No(n){for(var e=n.split(/\n+/g),t=Ae(e.shift()),a=[],r=0;r<e.length;r++){var o=Ae(e[r]);if(!!o){var i=o.split(qe),s="",u=void 0,c=!1;isNaN(i[0])?(c=!0,s=i[0],i=i.slice(1),a[r]={name:s,value:[]},u=a[r].value):u=a[r]=[];for(var d=0;d<i.length;d++)u.push(+i[d]);u.length===1&&(c?a[r].value=u[0]:a[r]=u[0])}}return{name:t,data:a}}function zo(n,e){var t=n.split(new RegExp(`
*`+Oe+`
*`,"g")),a={series:[]};return D(t,function(r,o){if(Mo(r)){var i=Bo(r),s=e[o],u=s.axisDim+"Axis";s&&(a[u]=a[u]||[],a[u][s.axisIndex]={data:i.categories},a.series=a.series.concat(i.series))}else{var i=No(r);a.series.push(i)}}),a}var Ro=function(n){z(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,a){setTimeout(function(){a.dispatchAction({type:"hideTip"})});var r=a.getDom(),o=this.model;this._dom&&r.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",i.style.backgroundColor=o.get("backgroundColor")||"#fff";var s=document.createElement("h4"),u=o.get("lang")||[];s.innerHTML=u[0]||o.get("title"),s.style.cssText="margin:10px 20px",s.style.color=o.get("textColor");var c=document.createElement("div"),d=document.createElement("textarea");c.style.cssText="overflow:auto";var h=o.get("optionToContent"),p=o.get("contentToOption"),y=ko(t);if(be(h)){var g=h(a.getOption());te(g)?c.innerHTML=g:gn(g)&&c.appendChild(g)}else{d.readOnly=o.get("readOnly");var m=d.style;m.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",m.color=o.get("textColor"),m.borderColor=o.get("textareaBorderColor"),m.backgroundColor=o.get("textareaColor"),d.value=y.value,c.appendChild(d)}var b=y.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:5px;left:0;right:0";var C="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",S=document.createElement("div"),x=document.createElement("div");C+=";background-color:"+o.get("buttonColor"),C+=";color:"+o.get("buttonTextColor");var P=this;function T(){r.removeChild(i),P._dom=null}_t(S,"click",T),_t(x,"click",function(){if(p==null&&h!=null||p!=null&&h==null){T();return}var O;try{be(p)?O=p(c,a.getOption()):O=zo(d.value,b)}catch(B){throw T(),new Error("Data view format error "+B)}O&&a.dispatchAction({type:"changeDataView",newOption:O}),T()}),S.innerHTML=u[1],x.innerHTML=u[2],x.style.cssText=S.style.cssText=C,!o.get("readOnly")&&_.appendChild(x),_.appendChild(S),i.appendChild(s),i.appendChild(c),i.appendChild(_),c.style.height=r.clientHeight-80+"px",r.appendChild(i),this._dom=i},e.prototype.remove=function(t,a){this._dom&&a.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,a){this.remove(t,a)},e.getDefaultOption=function(t){var a={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return a},e}(H);function Eo(n,e){return W(n,function(t,a){var r=e&&e[a];if(ye(r)&&!U(r)){var o=ye(t)&&!U(t);o||(t={value:t});var i=r.name!=null&&t.name==null;return t=de(t,r),i&&delete t.name,t}else return t})}rt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,e){var t=[];D(n.newOption.series,function(a){var r=e.getSeriesByName(a.name)[0];if(!r)t.push(le({type:"scatter"},a));else{var o=r.get("data");t.push({name:a.name,data:Eo(a.data,o)})}}),e.mergeOption(de({series:t},n.newOption))});var $o=Ro,Ia=D,La=ha();function Vo(n,e){var t=dt(n);Ia(e,function(a,r){for(var o=t.length-1;o>=0;o--){var i=t[o];if(i[r])break}if(o<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0];if(s){var u=s.getPercentRange();t[0][r]={dataZoomId:r,start:u[0],end:u[1]}}}}),t.push(e)}function Fo(n){var e=dt(n),t=e[e.length-1];e.length>1&&e.pop();var a={};return Ia(t,function(r,o){for(var i=e.length-1;i>=0;i--)if(r=e[i][o],r){a[o]=r;break}}),a}function Wo(n){La(n).snapshots=null}function Zo(n){return dt(n).length}function dt(n){var e=La(n);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var jo=function(n){z(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,a){Wo(t),a.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var a={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return a},e}(H);rt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,e){e.resetOption("recreate")});var Go=jo,Ho=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Uo=function(){function n(e,t,a){var r=this;this._targetInfoList=[];var o=Et(t,e);D(Yo,function(i,s){(!a||!a.include||_e(a.include,s)>=0)&&i(o,r._targetInfoList)})}return n.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(a,r,o){if((a.coordRanges||(a.coordRanges=[])).push(r),!a.coordRange){a.coordRange=r;var i=ze[a.brushType](0,o,r);a.__rangeOffset={offset:Wt[a.brushType](i.values,a.range,[1,1]),xyMinMax:i.xyMinMax}}}),e},n.prototype.matchOutputRanges=function(e,t,a){D(e,function(r){var o=this.findTargetInfo(r,t);o&&o!==!0&&D(o.coordSyses,function(i){var s=ze[r.brushType](1,i,r.range,!0);a(r,s.values,i,t)})},this)},n.prototype.setInputRanges=function(e,t){D(e,function(a){var r=this.findTargetInfo(a,t);if(a.range=a.range||[],r&&r!==!0){a.panelId=r.panelId;var o=ze[a.brushType](0,r.coordSys,a.coordRange),i=a.__rangeOffset;a.range=i?Wt[a.brushType](o.values,i.offset,qo(o.xyMinMax,i.xyMinMax)):o.values}},this)},n.prototype.makePanelOpts=function(e,t){return W(this._targetInfoList,function(a){var r=a.getPanelRect();return{panelId:a.panelId,defaultBrushType:t?t(a):null,clipPath:Rr(r),isTargetByCursor:$r(r,e,a.coordSysModel),getLinearBrushOtherExtent:Er(r)}})},n.prototype.controlSeries=function(e,t,a){var r=this.findTargetInfo(e,a);return r===!0||r&&_e(r.coordSyses,t.coordinateSystem)>=0},n.prototype.findTargetInfo=function(e,t){for(var a=this._targetInfoList,r=Et(t,e),o=0;o<a.length;o++){var i=a[o],s=e.panelId;if(s){if(i.panelId===s)return i}else for(var u=0;u<$t.length;u++)if($t[u](r,i))return i}return!0},n}();function Ke(n){return n[0]>n[1]&&n.reverse(),n}function Et(n,e){return pa(n,e,{includeMainTypes:Ho})}var Yo={grid:function(n,e){var t=n.xAxisModels,a=n.yAxisModels,r=n.gridModels,o=mn(),i={},s={};!t&&!a&&!r||(D(t,function(u){var c=u.axis.grid.model;o.set(c.id,c),i[c.id]=!0}),D(a,function(u){var c=u.axis.grid.model;o.set(c.id,c),s[c.id]=!0}),D(r,function(u){o.set(u.id,u),i[u.id]=!0,s[u.id]=!0}),o.each(function(u){var c=u.coordinateSystem,d=[];D(c.getCartesians(),function(h,p){(_e(t,h.getAxis("x").model)>=0||_e(a,h.getAxis("y").model)>=0)&&d.push(h)}),e.push({panelId:"grid--"+u.id,gridModel:u,coordSysModel:u,coordSys:d[0],coordSyses:d,getPanelRect:Vt.grid,xAxisDeclared:i[u.id],yAxisDeclared:s[u.id]})}))},geo:function(n,e){D(n.geoModels,function(t){var a=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:a,coordSyses:[a],getPanelRect:Vt.geo})})}},$t=[function(n,e){var t=n.xAxisModel,a=n.yAxisModel,r=n.gridModel;return!r&&t&&(r=t.axis.grid.model),!r&&a&&(r=a.axis.grid.model),r&&r===e.gridModel},function(n,e){var t=n.geoModel;return t&&t===e.geoModel}],Vt={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,e=n.getBoundingRect().clone();return e.applyTransform(sa(n)),e}},ze={lineX:j(Ft,0),lineY:j(Ft,1),rect:function(n,e,t,a){var r=n?e.pointToData([t[0][0],t[1][0]],a):e.dataToPoint([t[0][0],t[1][0]],a),o=n?e.pointToData([t[0][1],t[1][1]],a):e.dataToPoint([t[0][1],t[1][1]],a),i=[Ke([r[0],o[0]]),Ke([r[1],o[1]])];return{values:i,xyMinMax:i}},polygon:function(n,e,t,a){var r=[[1/0,-1/0],[1/0,-1/0]],o=W(t,function(i){var s=n?e.pointToData(i,a):e.dataToPoint(i,a);return r[0][0]=Math.min(r[0][0],s[0]),r[1][0]=Math.min(r[1][0],s[1]),r[0][1]=Math.max(r[0][1],s[0]),r[1][1]=Math.max(r[1][1],s[1]),s});return{values:o,xyMinMax:r}}};function Ft(n,e,t,a){var r=t.getAxis(["x","y"][n]),o=Ke(W([0,1],function(s){return e?r.coordToData(r.toLocalCoord(a[s]),!0):r.toGlobalCoord(r.dataToCoord(a[s]))})),i=[];return i[n]=o,i[1-n]=[NaN,NaN],{values:o,xyMinMax:i}}var Wt={lineX:j(Zt,0),lineY:j(Zt,1),rect:function(n,e,t){return[[n[0][0]-t[0]*e[0][0],n[0][1]-t[0]*e[0][1]],[n[1][0]-t[1]*e[1][0],n[1][1]-t[1]*e[1][1]]]},polygon:function(n,e,t){return W(n,function(a,r){return[a[0]-t[0]*e[r][0],a[1]-t[1]*e[r][1]]})}};function Zt(n,e,t,a){return[e[0]-a[n]*t[0],e[1]-a[n]*t[1]]}function qo(n,e){var t=jt(n),a=jt(e),r=[t[0]/a[0],t[1]/a[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}function jt(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var ka=Uo,Xe=D,Ko=bn("toolbox-dataZoom_"),Xo=function(n){z(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,a,r,o){this._brushController||(this._brushController=new zr(r.getZr()),this._brushController.on("brush",Y(this._onBrush,this)).mount()),ei(t,a,this,o,r),Qo(t,a)},e.prototype.onclick=function(t,a,r){Jo[r].call(this)},e.prototype.remove=function(t,a){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,a){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var a=t.areas;if(!t.isEnd||!a.length)return;var r={},o=this.ecModel;this._brushController.updateCovers([]);var i=new ka(ht(this.model),o,{include:["grid"]});i.matchOutputRanges(a,o,function(c,d,h){if(h.type==="cartesian2d"){var p=c.brushType;p==="rect"?(s("x",h,d[0]),s("y",h,d[1])):s({lineX:"x",lineY:"y"}[p],h,d)}}),Vo(o,r),this._dispatchZoomAction(r);function s(c,d,h){var p=d.getAxis(c),y=p.model,g=u(c,y,o),m=g.findRepresentativeAxisProxy(y).getMinMaxSpan();(m.minValueSpan!=null||m.maxValueSpan!=null)&&(h=Jn(0,h.slice(),p.scale.getExtent(),0,m.minValueSpan,m.maxValueSpan)),g&&(r[g.id]={dataZoomId:g.id,startValue:h[0],endValue:h[1]})}function u(c,d,h){var p;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(y){var g=y.getAxisModel(c,d.componentIndex);g&&(p=y)}),p}},e.prototype._dispatchZoomAction=function(t){var a=[];Xe(t,function(r,o){a.push(ee(r))}),a.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:a})},e.getDefaultOption=function(t){var a={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return a},e}(H),Jo={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(Fo(this.ecModel))}};function ht(n){var e={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function Qo(n,e){n.setIconStatus("back",Zo(e)>1?"emphasis":"normal")}function ei(n,e,t,a,r){var o=t._isZoomActive;a&&a.type==="takeGlobalCursor"&&(o=a.key==="dataZoomSelect"?a.dataZoomSelectActive:!1),t._isZoomActive=o,n.setIconStatus("zoom",o?"emphasis":"normal");var i=new ka(ht(n),e,{include:["grid"]}),s=i.makePanelOpts(r,function(u){return u.xAxisDeclared&&!u.yAxisDeclared?"lineX":!u.xAxisDeclared&&u.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(o&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}yn("dataZoom",function(n){var e=n.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var a=e.getModel(t),r=[],o=ht(a),i=pa(n,o);Xe(i.xAxisModels,function(u){return s(u,"xAxis","xAxisIndex")}),Xe(i.yAxisModels,function(u){return s(u,"yAxis","yAxisIndex")});function s(u,c,d){var h=u.componentIndex,p={type:"select",$fromToolbox:!0,filterMode:a.get("filterMode",!0)||"filter",id:Ko+c+h};p[d]=h,r.push(p)}return r});var ti=Xo;function ai(n){n.registerComponentModel(_o),n.registerComponentView(So),ge("saveAsImage",Ao),ge("magicType",Do),ge("dataView",$o),ge("dataZoom",ti),ge("restore",Go),tt(yo)}var ni=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,a,r){this.mergeDefaultAndTheme(t,r),this._initData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var a=this._data.count();this.option.loop?t=(t%a+a)%a:(t>=a&&(t=a-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,a=t.data||[],r=t.axisType,o=this._names=[],i;r==="category"?(i=[],D(a,function(c,d){var h=_n(xn(c),""),p;ye(c)?(p=ee(c),p.value=d):p=d,i.push(p),o.push(h)})):i=a;var s={category:"ordinal",time:"time",value:"number"}[r]||"number",u=this._data=new Cn([{name:"value",type:s}],this);u.initData(i,o)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(at),Gt=ni,Ma=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=Sn(Gt.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(Gt);la(Ma,wn.prototype);var ri=Ma,oi=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e}(nt),ii=oi,si=function(n){z(e,n);function e(t,a,r,o){var i=n.call(this,t,a,r)||this;return i.type=o||"value",i}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(Qn),li=si,Re=Math.PI,Ht=ha(),ui=function(n){z(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,a){this.api=a},e.prototype.render=function(t,a,r){if(this.model=t,this.api=r,this.ecModel=a,this.group.removeAll(),t.get("show",!0)){var o=this._layout(t,r),i=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),u=this._axis=this._createAxis(o,t);t.formatTooltip=function(c){var d=u.scale.getLabel({value:c});return An("nameValue",{noName:!0,value:d})},D(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](o,i,u,t)},this),this._renderAxisLabel(o,s,u,t),this._position(o,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,a){var r=t.get(["label","position"]),o=t.get("orient"),i=di(t,a),s;r==null||r==="auto"?s=o==="horizontal"?i.y+i.height/2<a.getHeight()/2?"-":"+":i.x+i.width/2<a.getWidth()/2?"+":"-":te(r)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[o][r]:s=r;var u={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},c={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:Re/2},h=o==="vertical"?i.height:i.width,p=t.getModel("controlStyle"),y=p.get("show",!0),g=y?p.get("itemSize"):0,m=y?p.get("itemGap"):0,b=g+m,_=t.get(["label","rotate"])||0;_=_*Re/180;var C,S,x,P=p.get("position",!0),T=y&&p.get("showPlayBtn",!0),O=y&&p.get("showPrevBtn",!0),B=y&&p.get("showNextBtn",!0),L=0,l=h;P==="left"||P==="bottom"?(T&&(C=[0,0],L+=b),O&&(S=[L,0],L+=b),B&&(x=[l-g,0],l-=b)):(T&&(C=[l-g,0],l-=b),O&&(S=[0,0],L+=b),B&&(x=[l-g,0],l-=b));var f=[L,l];return t.get("inverse")&&f.reverse(),{viewRect:i,mainLength:h,orient:o,rotation:d[o],labelRotation:_,labelPosOpt:s,labelAlign:t.get(["label","align"])||u[o],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||c[o],playPosition:C,prevBtnPosition:S,nextBtnPosition:x,axisExtent:f,controlSize:g,controlGap:m}},e.prototype._position=function(t,a){var r=this._mainGroup,o=this._labelGroup,i=t.viewRect;if(t.orient==="vertical"){var s=Nn(),u=i.x,c=i.y+i.height;xt(s,s,[-u,-c]),Tn(s,s,-Re/2),xt(s,s,[u,c]),i=i.clone(),i.applyTransform(s)}var d=C(i),h=C(r.getBoundingRect()),p=C(o.getBoundingRect()),y=[r.x,r.y],g=[o.x,o.y];g[0]=y[0]=d[0][0];var m=t.labelPosOpt;if(m==null||te(m)){var b=m==="+"?0:1;S(y,h,d,1,b),S(g,p,d,1,1-b)}else{var b=m>=0?0:1;S(y,h,d,1,b),g[1]=y[1]+m}r.setPosition(y),o.setPosition(g),r.rotation=o.rotation=t.rotation,_(r),_(o);function _(x){x.originX=d[0][0]-x.x,x.originY=d[1][0]-x.y}function C(x){return[[x.x,x.x+x.width],[x.y,x.y+x.height]]}function S(x,P,T,O,B){x[O]+=T[O][B]-P[O][B]}},e.prototype._createAxis=function(t,a){var r=a.getData(),o=a.get("axisType"),i=ci(a,o);i.getTicks=function(){return r.mapArray(["value"],function(c){return{value:c}})};var s=r.getDataExtent("value");i.setExtent(s[0],s[1]),i.calcNiceTicks();var u=new li("value",i,t.axisExtent,o);return u.model=a,u},e.prototype._createGroup=function(t){var a=this[t]=new Ce;return this.group.add(a),a},e.prototype._renderAxisLine=function(t,a,r,o){var i=r.getExtent();if(!!o.get(["lineStyle","show"])){var s=new Ct({shape:{x1:i[0],y1:0,x2:i[1],y2:0},style:le({lineCap:"round"},o.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});a.add(s);var u=this._progressLine=new Ct({shape:{x1:i[0],x2:this._currentPointer?this._currentPointer.x:i[0],y1:0,y2:0},style:de({lineCap:"round",lineWidth:s.style.lineWidth},o.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});a.add(u)}},e.prototype._renderAxisTick=function(t,a,r,o){var i=this,s=o.getData(),u=r.scale.getTicks();this._tickSymbols=[],D(u,function(c){var d=r.dataToCoord(c.value),h=s.getItemModel(c.value),p=h.getModel("itemStyle"),y=h.getModel(["emphasis","itemStyle"]),g=h.getModel(["progress","itemStyle"]),m={x:d,y:0,onclick:Y(i._changeTimeline,i,c.value)},b=Ut(h,p,a,m);b.ensureState("emphasis").style=y.getItemStyle(),b.ensureState("progress").style=g.getItemStyle(),ke(b);var _=na(b);h.get("tooltip")?(_.dataIndex=c.value,_.dataModel=o):_.dataIndex=_.dataModel=null,i._tickSymbols.push(b)})},e.prototype._renderAxisLabel=function(t,a,r,o){var i=this,s=r.getLabelModel();if(!!s.get("show")){var u=o.getData(),c=r.getViewLabels();this._tickLabels=[],D(c,function(d){var h=d.tickValue,p=u.getItemModel(h),y=p.getModel("label"),g=p.getModel(["emphasis","label"]),m=p.getModel(["progress","label"]),b=r.dataToCoord(d.tickValue),_=new ie({x:b,y:0,rotation:t.labelRotation-t.rotation,onclick:Y(i._changeTimeline,i,h),silent:!1,style:se(y,{text:d.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});_.ensureState("emphasis").style=se(g),_.ensureState("progress").style=se(m),a.add(_),ke(_),Ht(_).dataIndex=h,i._tickLabels.push(_)})}},e.prototype._renderControl=function(t,a,r,o){var i=t.controlSize,s=t.rotation,u=o.getModel("controlStyle").getItemStyle(),c=o.getModel(["emphasis","controlStyle"]).getItemStyle(),d=o.getPlayState(),h=o.get("inverse",!0);p(t.nextBtnPosition,"next",Y(this._changeTimeline,this,h?"-":"+")),p(t.prevBtnPosition,"prev",Y(this._changeTimeline,this,h?"+":"-")),p(t.playPosition,d?"stop":"play",Y(this._handlePlayClick,this,!d),!0);function p(y,g,m,b){if(!!y){var _=Pn(Ze(o.get(["controlStyle",g+"BtnSize"]),i),i),C=[0,-_/2,_,_],S=hi(o,g+"Icon",C,{x:y[0],y:y[1],originX:i/2,originY:0,rotation:b?-s:0,rectHover:!0,style:u,onclick:m});S.ensureState("emphasis").style=c,a.add(S),ke(S)}}},e.prototype._renderCurrentPointer=function(t,a,r,o){var i=o.getData(),s=o.getCurrentIndex(),u=i.getItemModel(s).getModel("checkpointStyle"),c=this,d={onCreate:function(h){h.draggable=!0,h.drift=Y(c._handlePointerDrag,c),h.ondragend=Y(c._handlePointerDragend,c),Yt(h,c._progressLine,s,r,o,!0)},onUpdate:function(h){Yt(h,c._progressLine,s,r,o)}};this._currentPointer=Ut(u,u,this._mainGroup,{},this._currentPointer,d)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,a,r){this._clearTimer(),this._pointerChangeTimeline([r.offsetX,r.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,a){var r=this._toAxisCoord(t)[0],o=this._axis,i=Dn(o.getExtent().slice());r>i[1]&&(r=i[1]),r<i[0]&&(r=i[0]),this._currentPointer.x=r,this._currentPointer.markRedraw(),this._progressLine.shape.x2=r,this._progressLine.dirty();var s=this._findNearestTick(r),u=this.model;(a||s!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(s)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var a=t.model;t._changeTimeline(a.getCurrentIndex()+(a.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var a=this._mainGroup.getLocalTransform();return On(t,a,!0)},e.prototype._findNearestTick=function(t){var a=this.model.getData(),r=1/0,o,i=this._axis;return a.each(["value"],function(s,u){var c=i.dataToCoord(s),d=Math.abs(c-t);d<r&&(r=d,o=u)}),o},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var a=this.model.getCurrentIndex();t==="+"?t=a+1:t==="-"&&(t=a-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),a=this._tickSymbols,r=this._tickLabels;if(a)for(var o=0;o<a.length;o++)a&&a[o]&&a[o].toggleState("progress",o<t);if(r)for(var o=0;o<r.length;o++)r&&r[o]&&r[o].toggleState("progress",Ht(r[o]).dataIndex<=t)},e.type="timeline.slider",e}(ii);function ci(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new kn({ordinalMeta:n.getCategories(),extent:[1/0,-1/0]});case"time":return new Ln({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new In}}function di(n,e){return ca(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},n.get("padding"))}function hi(n,e,t,a){var r=a.style,o=da(n.get(["controlStyle",e]),a||{},new Qe(t[0],t[1],t[2],t[3]));return r&&o.setStyle(r),o}function Ut(n,e,t,a,r,o){var i=e.get("color");if(r)r.setColor(i),t.add(r),o&&o.onUpdate(r);else{var s=n.get("symbol");r=aa(s,-1,-1,2,2,i),r.setStyle("strokeNoScale",!0),t.add(r),o&&o.onCreate(r)}var u=e.getItemStyle(["color"]);r.setStyle(u),a=Q({rectHover:!0,z2:100},a,!0);var c=Mn(n.get("symbolSize"));a.scaleX=c[0]/2,a.scaleY=c[1]/2;var d=Bn(n.get("symbolOffset"),c);d&&(a.x=(a.x||0)+d[0],a.y=(a.y||0)+d[1]);var h=n.get("symbolRotate");return a.rotation=(h||0)*Math.PI/180||0,r.attr(a),r.updateTransform(),r}function Yt(n,e,t,a,r,o){if(!n.dragging){var i=r.getModel("checkpointStyle"),s=a.dataToCoord(r.getData().get("value",t));if(o||!i.get("animation",!0))n.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var u={duration:i.get("animationDuration",!0),easing:i.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:s,y:0},u),e&&e.animateTo({shape:{x2:s}},u)}}}var pi=ui;function fi(n){n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,a){var r=t.getComponent("timeline");return r&&e.currentIndex!=null&&(r.setCurrentIndex(e.currentIndex),!r.get("loop",!0)&&r.isIndexMax()&&r.getPlayState()&&(r.setPlayState(!1),a.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:r.get("replaceMerge",!0)}),de({currentIndex:r.option.currentIndex},e)}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var a=t.getComponent("timeline");a&&e.playState!=null&&a.setPlayState(e.playState)})}function vi(n){var e=n&&n.timeline;U(e)||(e=e?[e]:[]),D(e,function(t){!t||gi(t)})}function gi(n){var e=n.type,t={number:"value",time:"time"};if(t[e]&&(n.axisType=t[e],delete n.type),qt(n),ne(n,"controlPosition")){var a=n.controlStyle||(n.controlStyle={});ne(a,"position")||(a.position=n.controlPosition),a.position==="none"&&!ne(a,"show")&&(a.show=!1,delete a.position),delete n.controlPosition}D(n.data||[],function(r){ye(r)&&!U(r)&&(!ne(r,"value")&&ne(r,"name")&&(r.value=r.name),qt(r))})}function qt(n){var e=n.itemStyle||(n.itemStyle={}),t=e.emphasis||(e.emphasis={}),a=n.label||n.label||{},r=a.normal||(a.normal={}),o={normal:1,emphasis:1};D(a,function(i,s){!o[s]&&!ne(r,s)&&(r[s]=i)}),t.label&&!ne(a,"emphasis")&&(a.emphasis=t.label,delete t.label)}function ne(n,e){return n.hasOwnProperty(e)}function mi(n){n.registerComponentModel(ri),n.registerComponentView(pi),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),fi(n),n.registerPreprocessor(vi)}function we(){return`#${(Math.random()*16777215<<0).toString(16)}`}function yi(n,e){const t=n.indexOf("open"),a=n.indexOf("close"),r=n.indexOf("high"),o=n.indexOf("low");return e.map((i,s,u)=>{const c=i.slice();if(s===0){const m=(c[t]+c[r]+c[o]+c[a])/4,b=(c[t]+c[a])/2;return c[t]=b,c[a]=m,c}const d=u[s-1],h=(c[t]+c[r]+c[o]+c[a])/4,p=(d[t]+d[a])/2,y=Math.max(c[r],c[t],c[a]),g=Math.min(c[o],c[t],c[a]);return c[t]=p,c[a]=h,c[r]=y,c[o]=g,c})}const bi=2,_i=3;function Kt(n,e,t=_i){const a=e%n;return e-a+(t===bi?n:0)}function Xt(n,e){var t,a;return`${n.is_short?"Short":"Long"} ${e}  ${ea(n.profit_ratio)} 
Enter-tag: ${(t=n.enter_tag)!=null?t:""} 
Exit-Tag: ${(a=n.exit_reason)!=null?a:""}`}const xi="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",Ci="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z";function Si(n,e){var a,r;const t=[];for(let o=0,i=e.length;o<i;o+=1){const s=e[o];s.open_timestamp>=n.data_start_ts&&s.open_timestamp<=n.data_stop_ts&&t.push([Kt((a=n.timeframe_ms)!=null?a:0,s.open_timestamp),s.open_rate,xi,s.is_short?180:0,s.is_short?"#b21dbf":"#0099ff","",Xt(s,"entry")]),s.close_timestamp!==void 0&&s.close_timestamp<=n.data_stop_ts&&s.close_timestamp>n.data_start_ts&&s.close_date!==void 0&&s.close_rate!==void 0&&t.push([Kt((r=n.timeframe_ms)!=null?r:0,s.close_timestamp),s.close_rate,Ci,s.is_short?180:0,s.is_short?"#b21dbf":"#0099ff",ea(s.profit_ratio,2),Xt(s,"exit")])}return{tradeData:t}}tt([zn,po,Rn,er,tr,En,mi,$n,ai,Vn,ar,nr,oo,rr,or,mr,Fn]);const Ee="5.5%",$e="1%",Jt=55,me=8,wi="#26A69A",Ai="#26A69A",Ti="#EF5350",Pi="#EF5350",Di="#00ff26",Oi="#00ff26",Ii="#faba25",Li="#faba25";var ki=Te({name:"CandleChart",components:{"v-chart":Wn},props:{trades:{required:!1,default:()=>[],type:Array},dataset:{required:!0,type:Object},heikinAshi:{required:!1,default:!1,type:Boolean},useUTC:{required:!1,default:!0,type:Boolean},plotConfig:{required:!0,type:Object},theme:{default:"dark",type:String}},setup(n){const e=R(),t=R([]),a=R([]),r=R({}),o=$(()=>n.dataset?n.dataset.strategy:""),i=$(()=>n.dataset?n.dataset.pair:""),s=$(()=>n.dataset?n.dataset.timeframe:""),u=$(()=>n.dataset?n.dataset.columns:[]),c=$(()=>n.dataset!==null&&typeof n.dataset=="object"),d=$(()=>n.trades.filter(g=>g.pair===i.value)),h=$(()=>`${o.value} - ${i.value} - ${s.value}`),p=(g=!1)=>{var Z,J,V,M;if(!c.value)return;(Z=r.value)!=null&&Z.title&&(r.value.title[0].text=h.value);const m=n.dataset.columns.findIndex(A=>A==="__date_ts"),b=n.dataset.columns.findIndex(A=>A==="open"),_=n.dataset.columns.findIndex(A=>A==="high"),C=n.dataset.columns.findIndex(A=>A==="low"),S=n.dataset.columns.findIndex(A=>A==="close"),x=n.dataset.columns.findIndex(A=>A==="volume"),P=n.dataset.columns.findIndex(A=>A==="_buy_signal_open"||A==="_buy_signal_close"||A==="_enter_long_signal_close"),T=n.dataset.columns.findIndex(A=>A==="_sell_signal_open"||A==="_sell_signal_close"||A==="_exit_long_signal_close"),O=n.dataset.columns.findIndex(A=>A==="_enter_short_signal_close"),B=n.dataset.columns.findIndex(A=>A==="_exit_short_signal_close"),L="subplots"in n.plotConfig?Object.keys(n.plotConfig.subplots).length+1:1;if(((J=r.value)==null?void 0:J.dataZoom)&&Array.isArray((V=r.value)==null?void 0:V.dataZoom))if(g){const A=(1-250/n.dataset.length)*100;r.value.dataZoom.forEach((E,N)=>{r.value&&r.value.dataZoom&&(r.value.dataZoom[N].start=A)})}else r.value.dataZoom.forEach((A,E)=>{r.value&&r.value.dataZoom&&(delete r.value.dataZoom[E].start,delete r.value.dataZoom[E].end)});const l=n.heikinAshi?yi(u.value,n.dataset.data):n.dataset.data.slice(),f=Array(l[l.length-2].length);f[m]=l[l.length-1][m]+n.dataset.timeframe_ms*3,l.push(f);const v={dataset:{source:l},grid:[{left:Ee,right:$e,bottom:`${L*me+2}%`},{left:Ee,right:$e,bottom:`${L*me}%`,height:`${me}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:wi,color0:Ti,borderColor:Ai,borderColor0:Pi},encode:{x:m,y:[b,S,C,_]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:m,y:x}},{name:"Entry",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Di},encode:{x:m,y:P}}]};if(T>=0&&Array.isArray(v.series)&&v.series.push({name:"Exit",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Ii},encode:{x:m,y:T}}),Array.isArray(v.series)&&(O>=0&&v.series.push({name:"Entry",type:"scatter",symbol:"triangle",symbolRotate:180,symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Oi},tooltip:{},encode:{x:m,y:O}}),B>=0&&v.series.push({name:"Exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Li},tooltip:{},encode:{x:m,y:B}})),Object.assign(r.value,v),"main_plot"in n.plotConfig&&Object.entries(n.plotConfig.main_plot).forEach(([A,E])=>{var F,G,he,pe,fe;const N=n.dataset.columns.findIndex(ae=>ae===A);if(N>1){!Array.isArray((F=r.value)==null?void 0:F.legend)&&((he=(G=r.value)==null?void 0:G.legend)==null?void 0:he.data)&&r.value.legend.data.push(A);const ae={name:A,type:E.type||"line",xAxisIndex:0,yAxisIndex:0,itemStyle:{color:E.color},encode:{x:m,y:N},showSymbol:!1};Array.isArray((pe=r.value)==null?void 0:pe.series)&&((fe=r.value)==null||fe.series.push(ae))}else console.log(`element ${A} for main plot not found in columns.`)}),"subplots"in n.plotConfig){let A=2;Object.entries(n.plotConfig.subplots).forEach(([E,N])=>{const F=A;Array.isArray(r.value.yAxis)&&r.value.yAxis.length<=A&&r.value.yAxis.push({scale:!0,gridIndex:F,name:E,nameLocation:"middle",nameGap:Jt,axisLabel:{show:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(r.value.xAxis)&&r.value.xAxis.length<=A&&r.value.xAxis.push({type:"time",scale:!0,gridIndex:F,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(r.value.dataZoom)&&r.value.dataZoom.forEach(G=>G.xAxisIndex&&Array.isArray(G.xAxisIndex)?G.xAxisIndex.push(A):null),r.value.grid&&Array.isArray(r.value.grid)&&r.value.grid.push({left:Ee,right:$e,bottom:`${(L-A+1)*me}%`,height:`${me}%`}),Object.entries(N).forEach(([G,he])=>{var fe;const pe=n.dataset.columns.findIndex(ae=>ae===G);if(pe>0){!Array.isArray(r.value.legend)&&((fe=r.value.legend)==null?void 0:fe.data)&&r.value.legend.data.push(G);const ae={name:G,type:he.type||"line",xAxisIndex:A,yAxisIndex:A,itemStyle:{color:he.color||we()},encode:{x:m,y:pe},showSymbol:!1};r.value.series&&Array.isArray(r.value.series)&&r.value.series.push(ae)}else console.log(`element ${G} was not found in the columns.`)}),A+=1})}r.value.grid&&Array.isArray(r.value.grid)&&(r.value.grid[r.value.grid.length-1].bottom="50px",delete r.value.grid[r.value.grid.length-1].top);const{tradeData:w}=Si(n.dataset,d.value),I="Trades";!Array.isArray(r.value.legend)&&((M=r.value.legend)==null?void 0:M.data)&&r.value.legend.data.push(I);const k={name:I,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:n.theme!=="dark"?"#fff":"#000",padding:2,color:n.theme==="dark"?"#fff":"#000"},labelLayout:{rotate:75,align:"left",dx:10},itemStyle:{color:A=>A.data[4]},symbol:A=>A[2],symbolRotate:A=>A[3],symbolSize:13,data:w};r.value.series&&Array.isArray(r.value.series)&&r.value.series.push(k),console.log("chartOptions",r.value),e.value.setOption(r.value)},y=()=>{r.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:n.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(g,m,b,_,C){const S={top:60};return S[["left","right"][+(g[0]<C.viewSize[0]/2)]]=5,S}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",nameGap:Jt,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",bottom:10,start:80,end:100}]},console.log("Initialized"),p(!0)};return Je(()=>{y()}),X(()=>n.useUTC,()=>y()),X(()=>n.dataset,()=>p()),X(()=>n.plotConfig,()=>y()),X(()=>n.heikinAshi,()=>p()),{candleChart:e,buyData:t,sellData:a,chartOptions:r,strategy:o,pair:i,timeframe:s,datasetColumns:u,hasData:c,filteredTrades:d,chartTitle:h}}});var Mi=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"row flex-grow-1 chart-wrapper"},[e.hasData?t("v-chart",{ref:"candleChart",attrs:{theme:e.theme,autoresize:"","manual-update":""}}):e._e()],1)},Bi=[],Ni=Pe(ki,Mi,Bi,!1,null,"d4f0862b",null,null),zi=Ni.exports,Ri=Te({name:"PlotIndicator",props:{value:{required:!0,type:Object},columns:{required:!0,type:Array},addNew:{required:!0,type:Boolean}},emits:["input"],setup(n,{emit:e}){const t=R(we()),a=R(Ie.line),r=R(Object.keys(Ie)),o=R(""),i=R(!1),s=()=>{t.value=we()},u=$(()=>i.value||!o.value?{}:{[o.value]:{color:t.value,type:a.value}}),c=()=>{e("input",u.value)},d=()=>{i.value=!0,c()};return X(()=>n.value,()=>{[o.value]=Object.keys(n.value),i.value=!1,o.value&&n.value&&(t.value=n.value[o.value].color||we(),a.value=n.value[o.value].type||Ie.line)}),X(t,()=>{n.addNew||c()}),{selColor:t,graphType:a,availableGraphTypes:r,selAvailableIndicator:o,cancelled:i,combinedIndicator:u,newColor:s,emitIndicator:c,clickCancel:d}}});var Ei=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[e.addNew?t("div",[t("b-form-group",{attrs:{label:"Add indicator","label-for":"indicatorSelector"}},[t("b-form-select",{attrs:{id:"indicatorSelector",options:e.columns,"select-size":4},model:{value:e.selAvailableIndicator,callback:function(a){e.selAvailableIndicator=a},expression:"selAvailableIndicator"}})],1)],1):e._e(),t("b-form-group",{attrs:{label:"Type","label-for":"plotTypeSelector"}},[t("b-form-select",{attrs:{id:"plotTypeSelector",size:"sm",options:e.availableGraphTypes},on:{change:function(a){return e.emitIndicator()}},model:{value:e.graphType,callback:function(a){e.graphType=a},expression:"graphType"}})],1),t("hr"),t("b-form-group",{attrs:{label:"Color","label-for":"colsel",size:"sm"}},[t("b-input-group",[t("b-input-group-prepend",[t("div",{staticClass:"colorbox mr-2",style:{"background-color":e.selColor}})]),t("b-form-input",{attrs:{id:"colsel",size:"sm"},model:{value:e.selColor,callback:function(a){e.selColor=a},expression:"selColor"}}),t("b-input-group-append",[t("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:e.newColor}},[e._v("\u21BB")])],1)],1)],1),t("div",{staticClass:"d-flex d-flex-columns"},[e.addNew?t("b-button",{staticClass:"flex-grow-1",attrs:{variant:"primary",title:"Add ",size:"sm"},on:{click:e.emitIndicator}},[e._v(" Save indicator ")]):e._e(),e.addNew?t("b-button",{staticClass:"ml-1 flex-grow-1",attrs:{variant:"primary",title:"Add ",size:"sm"},on:{click:e.clickCancel}},[e._v(" Cancel ")]):e._e()],1)],1)},$i=[],Vi=Pe(Ri,Ei,$i,!1,null,"493bdda3",null,null),Fi=Vi.exports,Wi=Te({name:"PlotConfigurator",components:{PlotIndicator:Fi},props:{value:{type:Object,required:!0},columns:{required:!0,type:Array},asModal:{required:!1,default:!0,type:Boolean}},emits:["input"],setup(n,{emit:e}){const t=Qt(),a=R(Ve),r=R("default"),o=R(""),i=R(""),s=R(!1),u=R(!1),c=R("main_plot"),d=R(),h=R(!0),p=$(()=>c.value==="main_plot"),y=$(()=>p.value?a.value.main_plot:a.value.subplots[c.value]),g=$(()=>["main_plot",...Object.keys(a.value.subplots)]),m=$(()=>p.value?Object.keys(a.value.main_plot):c.value in a.value.subplots?Object.keys(a.value.subplots[c.value]):[]),b=f=>{console.log(a.value);const v=Object.keys(f)[0],w=f[v];p.value?(console.log(`Adding ${v} to MainPlot`),a.value.main_plot[v]=q({},w)):(console.log(`Adding ${v} to ${c.value}`),a.value.subplots[c.value][v]=q({},w)),a.value=q({},a.value),s.value=!1,e("input",a.value)},_=$({get(){return s.value?{}:i.value?{[i.value]:y.value[i.value]}:{}},set(f){Object.keys(f)[0]&&f?b(f):s.value=!1}}),C=$({get(){return JSON.stringify(a.value,null,2)},set(f){try{d.value=JSON.parse(f),h.value=!0}catch{h.value=!1}}}),S=()=>{console.log(a.value),p.value?(console.log(`Removing ${i.value} from MainPlot`),delete a.value.main_plot[i.value]):(console.log(`Removing ${i.value} from ${c.value}`),delete a.value.subplots[c.value][i.value]),a.value=q({},a.value),console.log(a.value),i.value="",e("input",a.value)},x=()=>{a.value.subplots=vt(q({},a.value.subplots),{[o.value]:{}}),c.value=o.value,o.value="",console.log(a.value),e("input",a.value)},P=()=>{delete a.value.subplots[c.value],a.value.subplots=q({},a.value.subplots),c.value=""},T=()=>{a.value=Fe(r.value),console.log(a.value),console.log("loading config"),e("input",a.value)},O=()=>{d.value!==void 0&&h.value&&(a.value=d.value,e("input",a.value))},B=()=>{a.value=q({},Ve)},L=async()=>{try{await t.activeBot.getStrategyPlotConfig(),t.activeBot.strategyPlotConfig&&(a.value=t.activeBot.strategyPlotConfig,e("input",a.value))}catch{Va("Failed to load Plot configuration from Strategy.")}},l=()=>{t.activeBot.saveCustomPlotConfig({[r.value]:a.value})};return X(n.value,()=>{console.log("config value"),a.value=n.value,r.value=t.activeBot.plotConfigName}),Je(()=>{console.log("Config Mounted",n.value),a.value=n.value,r.value=t.activeBot.plotConfigName}),{botStore:t,removeIndicator:S,addSubplot:x,delSubplot:P,loadPlotConfig:T,loadConfigFromString:O,resetConfig:B,loadPlotConfigFromStrategy:L,savePlotConfig:l,showConfig:u,addNewIndicator:s,selIndicatorName:i,usedColumns:m,selSubPlot:c,newSubplotName:o,subplots:g,plotConfigNameLoc:r,selIndicator:_,plotConfigJson:C,tempPlotConfigValid:h}}});var Zi=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.columns?t("div",[t("b-form-group",{attrs:{label:"Plot config name","label-for":"idPlotConfigName"}},[t("b-form-input",{attrs:{id:"idPlotConfigName",size:"sm"},model:{value:e.plotConfigNameLoc,callback:function(a){e.plotConfigNameLoc=a},expression:"plotConfigNameLoc"}})],1),t("div",{staticClass:"col-mb-3"},[t("hr"),t("b-form-group",{attrs:{label:"Target","label-for":"FieldSel"}},[t("b-form-select",{attrs:{id:"FieldSel",options:e.subplots,"select-size":3},model:{value:e.selSubPlot,callback:function(a){e.selSubPlot=a},expression:"selSubPlot"}})],1)],1),t("b-form-group",{attrs:{label:"Add new plot","label-for":"newSubPlot"}},[t("b-input-group",{attrs:{size:"sm"}},[t("b-form-input",{staticClass:"addPlot",attrs:{id:"newSubPlot"},model:{value:e.newSubplotName,callback:function(a){e.newSubplotName=a},expression:"newSubplotName"}}),t("b-input-group-append",[t("b-button",{attrs:{disabled:!e.newSubplotName},on:{click:e.addSubplot}},[e._v("+")]),e.selSubPlot&&e.selSubPlot!="main_plot"?t("b-button",{on:{click:e.delSubplot}},[e._v("-")]):e._e()],1)],1)],1),t("hr"),t("div",[t("b-form-group",{attrs:{label:"Used indicators","label-for":"selectedIndicators"}},[t("b-form-select",{attrs:{id:"selectedIndicators",options:e.usedColumns,"select-size":4},model:{value:e.selIndicatorName,callback:function(a){e.selIndicatorName=a},expression:"selIndicatorName"}})],1)],1),t("div",[t("b-button",{attrs:{variant:"primary",title:"Add indicator to plot",size:"sm",disabled:e.addNewIndicator},on:{click:function(a){e.addNewIndicator=!e.addNewIndicator}}},[e._v(" Add new indicator ")]),t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",title:"Remove indicator to plot",size:"sm",disabled:!e.selIndicatorName},on:{click:e.removeIndicator}},[e._v(" Remove indicator ")])],1),e.selIndicatorName||e.addNewIndicator?t("PlotIndicator",{staticClass:"mt-1",attrs:{columns:e.columns,"add-new":e.addNewIndicator},model:{value:e.selIndicator,callback:function(a){e.selIndicator=a},expression:"selIndicator"}}):e._e(),t("hr"),t("div",[t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm"},on:{click:e.loadPlotConfig}},[e._v("Load")]),t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm"},on:{click:e.loadPlotConfigFromStrategy}},[e._v(" From strategy ")]),t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm","data-toggle":"tooltip",title:"Save configuration"},on:{click:e.savePlotConfig}},[e._v("Save")]),t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm",title:"Load configuration from text box below"},on:{click:e.resetConfig}},[e._v("Reset")]),t("b-button",{staticClass:"ml-1",attrs:{id:"showButton",variant:"primary",size:"sm",title:"Show configuration for easy transfer to a strategy"},on:{click:function(a){e.showConfig=!e.showConfig}}},[e._v("Show")]),e.showConfig?t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm",title:"Load configuration from text box below"},on:{click:e.loadConfigFromString}},[e._v("Load from String")]):e._e()],1),e.showConfig?t("div",{staticClass:"col-mb-5 ml-1 mt-2"},[t("b-textarea",{staticClass:"textArea",attrs:{id:"TextArea",size:"sm",state:e.tempPlotConfigValid},model:{value:e.plotConfigJson,callback:function(a){e.plotConfigJson=a},expression:"plotConfigJson"}})],1):e._e()],1):e._e()},ji=[],Gi=Pe(Wi,Zi,ji,!1,null,"ba503e47",null,null),Hi=Gi.exports,Ba={exports:{}};(function(n,e){(function(t,a){n.exports=a()})(typeof self!="undefined"?self:ir,function(){return(()=>{var t={646:i=>{i.exports=function(s){if(Array.isArray(s)){for(var u=0,c=new Array(s.length);u<s.length;u++)c[u]=s[u];return c}}},713:i=>{i.exports=function(s,u,c){return u in s?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c,s}},860:i=>{i.exports=function(s){if(Symbol.iterator in Object(s)||Object.prototype.toString.call(s)==="[object Arguments]")return Array.from(s)}},206:i=>{i.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},319:(i,s,u)=>{var c=u(646),d=u(860),h=u(206);i.exports=function(p){return c(p)||d(p)||h()}},8:i=>{function s(u){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?i.exports=s=function(c){return typeof c}:i.exports=s=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},s(u)}i.exports=s}},a={};function r(i){var s=a[i];if(s!==void 0)return s.exports;var u=a[i]={exports:{}};return t[i](u,u.exports,r),u.exports}r.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return r.d(s,{a:s}),s},r.d=(i,s)=>{for(var u in s)r.o(s,u)&&!r.o(i,u)&&Object.defineProperty(i,u,{enumerable:!0,get:s[u]})},r.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),r.r=i=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var o={};return(()=>{r.r(o),r.d(o,{VueSelect:()=>O,default:()=>L,mixins:()=>B});var i=r(319),s=r.n(i),u=r(8),c=r.n(u),d=r(713),h=r.n(d);const p={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer:function(){this.autoscroll&&this.maybeAdjustScroll()},open:function(l){var f=this;this.autoscroll&&l&&this.$nextTick(function(){return f.maybeAdjustScroll()})}},methods:{maybeAdjustScroll:function(){var l,f=((l=this.$refs.dropdownMenu)===null||l===void 0?void 0:l.children[this.typeAheadPointer])||!1;if(f){var v=this.getDropdownViewport(),w=f.getBoundingClientRect(),I=w.top,k=w.bottom,Z=w.height;if(I<v.top)return this.$refs.dropdownMenu.scrollTop=f.offsetTop;if(k>v.bottom)return this.$refs.dropdownMenu.scrollTop=f.offsetTop-(v.height-Z)}},getDropdownViewport:function(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},y={data:function(){return{typeAheadPointer:-1}},watch:{filteredOptions:function(){for(var l=0;l<this.filteredOptions.length;l++)if(this.selectable(this.filteredOptions[l])){this.typeAheadPointer=l;break}},open:function(l){l&&this.typeAheadToLastSelected()},selectedValue:function(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp:function(){for(var l=this.typeAheadPointer-1;l>=0;l--)if(this.selectable(this.filteredOptions[l])){this.typeAheadPointer=l;break}},typeAheadDown:function(){for(var l=this.typeAheadPointer+1;l<this.filteredOptions.length;l++)if(this.selectable(this.filteredOptions[l])){this.typeAheadPointer=l;break}},typeAheadSelect:function(){var l=this.filteredOptions[this.typeAheadPointer];l&&this.selectable(l)&&this.select(l)},typeAheadToLastSelected:function(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},g={props:{loading:{type:Boolean,default:!1}},data:function(){return{mutableLoading:!1}},watch:{search:function(){this.$emit("search",this.search,this.toggleLoading)},loading:function(l){this.mutableLoading=l}},methods:{toggleLoading:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.mutableLoading=l==null?!this.mutableLoading:l}}};function m(l,f,v,w,I,k,Z,J){var V,M=typeof l=="function"?l.options:l;if(f&&(M.render=f,M.staticRenderFns=v,M._compiled=!0),w&&(M.functional=!0),k&&(M._scopeId="data-v-"+k),Z?(V=function(N){(N=N||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||typeof __VUE_SSR_CONTEXT__=="undefined"||(N=__VUE_SSR_CONTEXT__),I&&I.call(this,N),N&&N._registeredComponents&&N._registeredComponents.add(Z)},M._ssrRegister=V):I&&(V=J?function(){I.call(this,(M.functional?this.parent:this).$root.$options.shadowRoot)}:I),V)if(M.functional){M._injectStyles=V;var A=M.render;M.render=function(N,F){return V.call(F),A(N,F)}}else{var E=M.beforeCreate;M.beforeCreate=E?[].concat(E,V):[V]}return{exports:l,options:M}}const b={Deselect:m({},function(){var l=this.$createElement,f=this._self._c||l;return f("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"}},[f("path",{attrs:{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"}})])},[],!1,null,null,null).exports,OpenIndicator:m({},function(){var l=this.$createElement,f=this._self._c||l;return f("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"}},[f("path",{attrs:{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"}})])},[],!1,null,null,null).exports},_={inserted:function(l,f,v){var w=v.context;if(w.appendToBody){var I=w.$refs.toggle.getBoundingClientRect(),k=I.height,Z=I.top,J=I.left,V=I.width,M=window.scrollX||window.pageXOffset,A=window.scrollY||window.pageYOffset;l.unbindPosition=w.calculatePosition(l,w,{width:V+"px",left:M+J+"px",top:A+Z+k+"px"}),document.body.appendChild(l)}},unbind:function(l,f,v){v.context.appendToBody&&(l.unbindPosition&&typeof l.unbindPosition=="function"&&l.unbindPosition(),l.parentNode&&l.parentNode.removeChild(l))}},C=function(l){var f={};return Object.keys(l).sort().forEach(function(v){f[v]=l[v]}),JSON.stringify(f)};var S=0;const x=function(){return++S};function P(l,f){var v=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);f&&(w=w.filter(function(I){return Object.getOwnPropertyDescriptor(l,I).enumerable})),v.push.apply(v,w)}return v}function T(l){for(var f=1;f<arguments.length;f++){var v=arguments[f]!=null?arguments[f]:{};f%2?P(Object(v),!0).forEach(function(w){h()(l,w,v[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(v)):P(Object(v)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(v,w))})}return l}const O=m({components:T({},b),directives:{appendToBody:_},mixins:[p,y,g],props:{value:{},components:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:function(l){return l}},selectable:{type:Function,default:function(l){return!0}},getOptionLabel:{type:Function,default:function(l){return c()(l)==="object"?l.hasOwnProperty(this.label)?l[this.label]:console.warn('[vue-select warn]: Label key "option.'.concat(this.label,'" does not')+" exist in options object ".concat(JSON.stringify(l),`.
`)+"https://vue-select.org/api/props.html#getoptionlabel"):l}},getOptionKey:{type:Function,default:function(l){if(c()(l)!=="object")return l;try{return l.hasOwnProperty("id")?l.id:C(l)}catch(f){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,l,f)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default:function(l,f,v){return(f||"").toLocaleLowerCase().indexOf(v.toLocaleLowerCase())>-1}},filter:{type:Function,default:function(l,f){var v=this;return l.filter(function(w){var I=v.getOptionLabel(w);return typeof I=="number"&&(I=I.toString()),v.filterBy(w,I,f)})}},createOption:{type:Function,default:function(l){return c()(this.optionList[0])==="object"?h()({},this.label,l):l}},resetOnOptionsChange:{default:!1,validator:function(l){return["function","boolean"].includes(c()(l))}},clearSearchOnBlur:{type:Function,default:function(l){var f=l.clearSearchOnSelect,v=l.multiple;return f&&!v}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:function(){return[13]}},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:function(l,f){return l}},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default:function(l,f,v){var w=v.width,I=v.top,k=v.left;l.style.top=I,l.style.left=k,l.style.width=w}},dropdownShouldOpen:{type:Function,default:function(l){var f=l.noDrop,v=l.open,w=l.mutableLoading;return!f&&v&&!w}},uid:{type:[String,Number],default:function(){return x()}}},data:function(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[]}},computed:{isTrackingValues:function(){return this.value===void 0||this.$options.propsData.hasOwnProperty("reduce")},selectedValue:function(){var l=this.value;return this.isTrackingValues&&(l=this.$data._value),l!=null&&l!==""?[].concat(l):[]},optionList:function(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl:function(){return this.$scopedSlots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope:function(){var l=this,f={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:T({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":"vs".concat(this.uid,"__combobox"),"aria-controls":"vs".concat(this.uid,"__listbox"),ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":"vs".concat(this.uid,"__option-").concat(this.typeAheadPointer)}:{}),events:{compositionstart:function(){return l.isComposing=!0},compositionend:function(){return l.isComposing=!1},keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:function(v){return l.search=v.target.value}}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:f,listFooter:f,header:T({},f,{deselect:this.deselect}),footer:T({},f,{deselect:this.deselect})}},childComponents:function(){return T({},b,{},this.components)},stateClasses:function(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching:function(){return!!this.search},dropdownOpen:function(){return this.dropdownShouldOpen(this)},searchPlaceholder:function(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions:function(){var l=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return l;var f=this.search.length?this.filter(l,this.search,this):l;if(this.taggable&&this.search.length){var v=this.createOption(this.search);this.optionExists(v)||f.unshift(v)}return f},isValueEmpty:function(){return this.selectedValue.length===0},showClearButton:function(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options:function(l,f){var v=this;!this.taggable&&(typeof v.resetOnOptionsChange=="function"?v.resetOnOptionsChange(l,f,v.selectedValue):v.resetOnOptionsChange)&&this.clearSelection(),this.value&&this.isTrackingValues&&this.setInternalValueFromOptions(this.value)},value:{immediate:!0,handler:function(l){this.isTrackingValues&&this.setInternalValueFromOptions(l)}},multiple:function(){this.clearSelection()},open:function(l){this.$emit(l?"open":"close")}},created:function(){this.mutableLoading=this.loading,this.$on("option:created",this.pushTag)},methods:{setInternalValueFromOptions:function(l){var f=this;Array.isArray(l)?this.$data._value=l.map(function(v){return f.findOptionFromReducedValue(v)}):this.$data._value=this.findOptionFromReducedValue(l)},select:function(l){this.$emit("option:selecting",l),this.isOptionSelected(l)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(l):(this.taggable&&!this.optionExists(l)&&this.$emit("option:created",l),this.multiple&&(l=this.selectedValue.concat(l)),this.updateValue(l),this.$emit("option:selected",l)),this.onAfterSelect(l)},deselect:function(l){var f=this;this.$emit("option:deselecting",l),this.updateValue(this.selectedValue.filter(function(v){return!f.optionComparator(v,l)})),this.$emit("option:deselected",l)},clearSelection:function(){this.updateValue(this.multiple?[]:null)},onAfterSelect:function(l){var f=this;this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search=""),this.noDrop&&this.multiple&&this.$nextTick(function(){return f.$refs.search.focus()})},updateValue:function(l){var f=this;this.value===void 0&&(this.$data._value=l),l!==null&&(l=Array.isArray(l)?l.map(function(v){return f.reduce(v)}):this.reduce(l)),this.$emit("input",l)},toggleDropdown:function(l){var f=l.target!==this.searchEl;f&&l.preventDefault();var v=[].concat(s()(this.$refs.deselectButtons||[]),s()([this.$refs.clearButton]));this.searchEl===void 0||v.filter(Boolean).some(function(w){return w.contains(l.target)||w===l.target})?l.preventDefault():this.open&&f?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected:function(l){var f=this;return this.selectedValue.some(function(v){return f.optionComparator(v,l)})},isOptionDeselectable:function(l){return this.isOptionSelected(l)&&this.deselectFromDropdown},optionComparator:function(l,f){return this.getOptionKey(l)===this.getOptionKey(f)},findOptionFromReducedValue:function(l){var f=this,v=[].concat(s()(this.options),s()(this.pushedTags)).filter(function(w){return JSON.stringify(f.reduce(w))===JSON.stringify(l)});return v.length===1?v[0]:v.find(function(w){return f.optionComparator(w,f.$data._value)})||l},closeSearchOptions:function(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue:function(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){var l=null;this.multiple&&(l=s()(this.selectedValue.slice(0,this.selectedValue.length-1))),this.updateValue(l)}},optionExists:function(l){var f=this;return this.optionList.some(function(v){return f.optionComparator(v,l)})},normalizeOptionForSlot:function(l){return c()(l)==="object"?l:h()({},this.label,l)},pushTag:function(l){this.pushedTags.push(l)},onEscape:function(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur:function(){if(!this.mousedown||this.searching){var l=this.clearSearchOnSelect,f=this.multiple;return this.clearSearchOnBlur({clearSearchOnSelect:l,multiple:f})&&(this.search=""),void this.closeSearchOptions()}this.mousedown=!1,this.search.length!==0||this.options.length!==0||this.closeSearchOptions()},onSearchFocus:function(){this.open=!0,this.$emit("search:focus")},onMousedown:function(){this.mousedown=!0},onMouseUp:function(){this.mousedown=!1},onSearchKeyDown:function(l){var f=this,v=function(k){return k.preventDefault(),!f.isComposing&&f.typeAheadSelect()},w={8:function(k){return f.maybeDeleteValue()},9:function(k){return f.onTab()},27:function(k){return f.onEscape()},38:function(k){return k.preventDefault(),f.typeAheadUp()},40:function(k){return k.preventDefault(),f.typeAheadDown()}};this.selectOnKeyCodes.forEach(function(k){return w[k]=v});var I=this.mapKeydown(w,this);if(typeof I[l.keyCode]=="function")return I[l.keyCode](l)}}},function(){var l=this,f=l.$createElement,v=l._self._c||f;return v("div",{staticClass:"v-select",class:l.stateClasses,attrs:{dir:l.dir}},[l._t("header",null,null,l.scope.header),l._v(" "),v("div",{ref:"toggle",staticClass:"vs__dropdown-toggle",attrs:{id:"vs"+l.uid+"__combobox",role:"combobox","aria-expanded":l.dropdownOpen.toString(),"aria-owns":"vs"+l.uid+"__listbox","aria-label":"Search for option"},on:{mousedown:function(w){return l.toggleDropdown(w)}}},[v("div",{ref:"selectedOptions",staticClass:"vs__selected-options"},[l._l(l.selectedValue,function(w){return l._t("selected-option-container",[v("span",{key:l.getOptionKey(w),staticClass:"vs__selected"},[l._t("selected-option",[l._v(`
            `+l._s(l.getOptionLabel(w))+`
          `)],null,l.normalizeOptionForSlot(w)),l._v(" "),l.multiple?v("button",{ref:"deselectButtons",refInFor:!0,staticClass:"vs__deselect",attrs:{disabled:l.disabled,type:"button",title:"Deselect "+l.getOptionLabel(w),"aria-label":"Deselect "+l.getOptionLabel(w)},on:{click:function(I){return l.deselect(w)}}},[v(l.childComponents.Deselect,{tag:"component"})],1):l._e()],2)],{option:l.normalizeOptionForSlot(w),deselect:l.deselect,multiple:l.multiple,disabled:l.disabled})}),l._v(" "),l._t("search",[v("input",l._g(l._b({staticClass:"vs__search"},"input",l.scope.search.attributes,!1),l.scope.search.events))],null,l.scope.search)],2),l._v(" "),v("div",{ref:"actions",staticClass:"vs__actions"},[v("button",{directives:[{name:"show",rawName:"v-show",value:l.showClearButton,expression:"showClearButton"}],ref:"clearButton",staticClass:"vs__clear",attrs:{disabled:l.disabled,type:"button",title:"Clear Selected","aria-label":"Clear Selected"},on:{click:l.clearSelection}},[v(l.childComponents.Deselect,{tag:"component"})],1),l._v(" "),l._t("open-indicator",[l.noDrop?l._e():v(l.childComponents.OpenIndicator,l._b({tag:"component"},"component",l.scope.openIndicator.attributes,!1))],null,l.scope.openIndicator),l._v(" "),l._t("spinner",[v("div",{directives:[{name:"show",rawName:"v-show",value:l.mutableLoading,expression:"mutableLoading"}],staticClass:"vs__spinner"},[l._v("Loading...")])],null,l.scope.spinner)],2)]),l._v(" "),v("transition",{attrs:{name:l.transition}},[l.dropdownOpen?v("ul",{directives:[{name:"append-to-body",rawName:"v-append-to-body"}],key:"vs"+l.uid+"__listbox",ref:"dropdownMenu",staticClass:"vs__dropdown-menu",attrs:{id:"vs"+l.uid+"__listbox",role:"listbox",tabindex:"-1"},on:{mousedown:function(w){return w.preventDefault(),l.onMousedown(w)},mouseup:l.onMouseUp}},[l._t("list-header",null,null,l.scope.listHeader),l._v(" "),l._l(l.filteredOptions,function(w,I){return v("li",{key:l.getOptionKey(w),staticClass:"vs__dropdown-option",class:{"vs__dropdown-option--deselect":l.isOptionDeselectable(w)&&I===l.typeAheadPointer,"vs__dropdown-option--selected":l.isOptionSelected(w),"vs__dropdown-option--highlight":I===l.typeAheadPointer,"vs__dropdown-option--disabled":!l.selectable(w)},attrs:{id:"vs"+l.uid+"__option-"+I,role:"option","aria-selected":I===l.typeAheadPointer||null},on:{mouseover:function(k){l.selectable(w)&&(l.typeAheadPointer=I)},click:function(k){k.preventDefault(),k.stopPropagation(),l.selectable(w)&&l.select(w)}}},[l._t("option",[l._v(`
          `+l._s(l.getOptionLabel(w))+`
        `)],null,l.normalizeOptionForSlot(w))],2)}),l._v(" "),l.filteredOptions.length===0?v("li",{staticClass:"vs__no-options"},[l._t("no-options",[l._v(`
          Sorry, no matching options.
        `)],null,l.scope.noOptions)],2):l._e(),l._v(" "),l._t("list-footer",null,null,l.scope.listFooter)],2):v("ul",{staticStyle:{display:"none",visibility:"hidden"},attrs:{id:"vs"+l.uid+"__listbox",role:"listbox"}})]),l._v(" "),l._t("footer",null,null,l.scope.footer)],2)},[],!1,null,null,null).exports,B={ajax:g,pointer:y,pointerScroll:p},L=O})(),o})()})})(Ba);var Ui=sr(Ba.exports),Yi=Te({name:"CandleChartContainer",components:{CandleChart:zi,PlotConfigurator:Hi,vSelect:Ui},props:{trades:{required:!1,default:()=>[],type:Array},availablePairs:{required:!0,type:Array},timeframe:{required:!0,type:String},historicView:{required:!1,default:!1,type:Boolean},plotConfigModal:{required:!1,default:!0,type:Boolean},timerange:{required:!1,default:"",type:String},strategy:{required:!1,default:"",type:String}},setup(n){const e=Za(),t=Fa(),a=Qt(),r=R(""),o=R(q({},Ve)),i=R(""),s=R(n.plotConfigModal),u=$(()=>{var _,C;return n.historicView?(_=a.activeBot.history[`${r.value}__${n.timeframe}`])==null?void 0:_.data:(C=a.activeBot.candleData[`${r.value}__${n.timeframe}`])==null?void 0:C.data}),c=$(()=>{var _;return n.strategy||((_=u.value)==null?void 0:_.strategy)||""}),d=$(()=>u.value?u.value.columns:[]),h=$(()=>!!u.value),p=$(()=>n.historicView?a.activeBot.historyStatus===ve.loading:a.activeBot.candleDataStatus===ve.loading),y=$(()=>{switch(n.historicView?a.activeBot.historyStatus:a.activeBot.candleDataStatus){case ve.loading:return"Loading...";case ve.success:return"No data available";case ve.error:return"Failed to load data";default:return"Unknown"}}),g=()=>{console.log("plotConfigChanged"),o.value=Fe(i.value),a.activeBot.setPlotConfigName(i.value)},m=()=>{n.plotConfigModal?e==null||e.proxy.$bvModal.show("plotConfiguratorModal"):s.value=!s.value},b=()=>{console.log("refresh",r.value,n.timeframe),r.value&&n.timeframe&&(n.historicView?a.activeBot.getPairHistory({pair:r.value,timeframe:n.timeframe,timerange:n.timerange,strategy:n.strategy}):a.activeBot.getPairCandles({pair:r.value,timeframe:n.timeframe,limit:500}))};return X(()=>n.availablePairs,()=>{n.availablePairs.find(_=>_===r.value)||([r.value]=n.availablePairs,b())}),X(()=>a.activeBot.selectedPair,()=>{r.value=a.activeBot.selectedPair,b()}),Je(()=>{a.activeBot.selectedPair?r.value=a.activeBot.selectedPair:n.availablePairs.length>0&&([r.value]=n.availablePairs),i.value=Wa(),o.value=Fe(i.value),h||b()}),{botStore:a,settingsStore:t,history,dataset:u,strategyName:c,datasetColumns:d,isLoadingDataset:p,noDatasetText:y,hasDataset:h,plotConfigChanged:g,showPlotConfig:s,showConfigurator:m,refresh:b,plotConfigName:i,pair:r,plotConfig:o}}});var qi=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"d-flex h-100"},[t("div",{staticClass:"flex-fill container-fluid flex-column align-items-stretch d-flex h-100"},[e.plotConfigModal?t("b-modal",{attrs:{id:"plotConfiguratorModal",title:"Plot Configurator","ok-only":"","hide-backdrop":"","button-size":"sm"}},[t("PlotConfigurator",{attrs:{columns:e.datasetColumns},model:{value:e.plotConfig,callback:function(a){e.plotConfig=a},expression:"plotConfig"}})],1):e._e(),t("div",{staticClass:"row mr-0"},[t("div",{staticClass:"ml-2 d-flex flex-wrap flex-md-nowrap align-items-center"},[t("span",{staticClass:"ml-2 text-nowrap"},[e._v(e._s(e.strategyName)+" | "+e._s(e.timeframe||""))]),t("v-select",{staticClass:"ml-2",staticStyle:{"min-width":"7em"},attrs:{options:e.availablePairs,size:"sm",clearable:!1},on:{input:e.refresh},model:{value:e.pair,callback:function(a){e.pair=a},expression:"pair"}}),t("b-button",{staticClass:"ml-2",attrs:{disabled:!e.pair,size:"sm"},on:{click:e.refresh}},[e._v("\u21BB")]),e.dataset?t("small",{staticClass:"ml-2 text-nowrap",attrs:{title:"Long entry signals"}},[e._v("Long signals: "+e._s(e.dataset.enter_long_signals||e.dataset.buy_signals))]):e._e(),e.dataset?t("small",{staticClass:"ml-2 text-nowrap",attrs:{title:"Long exit signals"}},[e._v("Long exit: "+e._s(e.dataset.exit_long_signals||e.dataset.sell_signals))]):e._e(),e.dataset&&e.dataset.enter_short_signals?t("small",{staticClass:"ml-2 text-nowrap"},[e._v("Short entries: "+e._s(e.dataset.enter_short_signals))]):e._e(),e.dataset&&e.dataset.exit_short_signals?t("small",{staticClass:"ml-2 text-nowrap"},[e._v("Short exits: "+e._s(e.dataset.exit_short_signals))]):e._e()],1),t("div",{staticClass:"ml-auto d-flex align-items-center"},[t("b-form-checkbox",{model:{value:e.settingsStore.useHeikinAshiCandles,callback:function(a){e.$set(e.settingsStore,"useHeikinAshiCandles",a)},expression:"settingsStore.useHeikinAshiCandles"}},[e._v("Heikin Ashi")]),t("div",{staticClass:"ml-2"},[t("b-select",{attrs:{options:e.botStore.activeBot.availablePlotConfigNames,size:"sm"},on:{change:e.plotConfigChanged},model:{value:e.plotConfigName,callback:function(a){e.plotConfigName=a},expression:"plotConfigName"}})],1),t("div",{staticClass:"ml-2 mr-0 mr-md-1"},[t("b-button",{attrs:{size:"sm",title:"Plot configurator"},on:{click:e.showConfigurator}},[e._v(" \u2699 ")])],1)],1)]),t("div",{staticClass:"row mr-1 ml-1 h-100"},[e.hasDataset?t("CandleChart",{attrs:{dataset:e.dataset,trades:e.trades,"plot-config":e.plotConfig,"heikin-ashi":e.settingsStore.useHeikinAshiCandles,"use-u-t-c":e.settingsStore.timezone==="UTC",theme:e.settingsStore.chartTheme}}):t("div",{staticClass:"m-auto"},[e.isLoadingDataset?t("b-spinner",{attrs:{label:"Spinning"}}):t("div",{staticStyle:{"font-size":"1.5rem"}},[e._v(" "+e._s(e.noDatasetText)+" ")])],1)],1)],1),t("transition",{attrs:{name:"fade",mode:"in-out"}},[e.plotConfigModal?e._e():t("div",{directives:[{name:"show",rawName:"v-show",value:e.showPlotConfig,expression:"showPlotConfig"}],staticClass:"w-25 config-sidebar"},[t("PlotConfigurator",{attrs:{columns:e.datasetColumns,"as-modal":!1},model:{value:e.plotConfig,callback:function(a){e.plotConfig=a},expression:"plotConfig"}})],1)])],1)},Ki=[],Xi=Pe(Yi,qi,Ki,!1,null,"5d8b8519",null,null),rs=Xi.exports;export{rs as C};
//# sourceMappingURL=CandleChartContainer.1795a5af.js.map
