import{u as v,i as b,a as g,b as y,c as C,d as x,C as T}from"./install.8bbcfb1f.js";import{d as $,e as w,r as f,w as O,c as _,n as P,t as k}from"./index.061ad1de.js";import{i as L,a as S,k as I,c as R,l as A}from"./install.8ac9b939.js";v([L,S,b,g,I,y,C,x]);const p="Profit";var F=$({name:"CumProfitChart",components:{"v-chart":T},props:{trades:{required:!0,type:Array},showTitle:{default:!0,type:Boolean},profitColumn:{default:"close_profit_abs",type:String}},setup(a){const t=w(),o=f([]),d=f([]),l=()=>{console.log("trades"),o.value=[];const r=[],n={},i=a.trades.slice().sort((m,u)=>m.close_timestamp>u.close_timestamp?1:-1);let c=0;for(let m=0,u=i.length;m<u;m+=1){const e=i[m];e.close_timestamp&&e[a.profitColumn]&&(c+=e[a.profitColumn],n[e.close_timestamp]?(n[e.close_timestamp].profit+=e[a.profitColumn],n[e.close_timestamp][e.botId]?n[e.close_timestamp][e.botId]+=e[a.profitColumn]:n[e.close_timestamp][e.botId]=c):n[e.close_timestamp]={profit:c,[e.botId]:c},r.push({date:e.close_timestamp,profit:c,[e.botId]:c}),o.value.includes(e.botId)||o.value.push(e.botId))}d.value=Object.entries(n).map(([m,u])=>({date:parseInt(m,10),profit:u.profit}))};O([a.trades],l),l();const s=_(()=>({title:{text:"Cumulative Profit",show:a.showTitle},backgroundColor:"rgba(0, 0, 0, 0)",dataset:{dimensions:["date","profit"],source:d.value},tooltip:{trigger:"axis",axisPointer:{type:"line",label:{backgroundColor:"#6a7985"}}},legend:{data:[p],right:"5%"},useUTC:!1,xAxis:{type:"time"},yAxis:[{type:"value",name:p,splitLine:{show:!1},nameRotate:90,nameLocation:"middle",nameGap:40}],grid:{bottom:80},dataZoom:[{type:"inside",start:0,end:100},{show:!0,type:"slider",bottom:10,start:0,end:100}],series:[{type:"line",name:p,animation:!0,step:"end",lineStyle:{color:t.chartTheme==="dark"?"#c2c2c2":"black"},itemStyle:{color:t.chartTheme==="dark"?"#c2c2c2":"black"}}]}));return{settingsStore:t,cumulativeData:d,chartOptions:s}}});var z=function(){var t=this,o=t._self._c;return t._self._setupProxy,t.trades?o("v-chart",{attrs:{option:t.chartOptions,autoresize:"",theme:t.settingsStore.chartTheme}}):t._e()},D=[],G=P(F,z,D,!1,null,"747b85e5",null,null),E=G.exports;v([L,S,b,g,I,y,C,x,R,A]);const h="Profit %",j="#9be0a8";var H=$({name:"TradesLogChart",components:{"v-chart":T},props:{trades:{required:!0,type:Array},showTitle:{default:!0,type:Boolean}},setup(a){const t=w(),o=_(()=>{const l=[],s=a.trades.slice(0).sort((r,n)=>r.close_timestamp>n.close_timestamp?1:-1);for(let r=0,n=s.length;r<n;r+=1){const i=s[r],c=[r,(i.profit_ratio*100).toFixed(2),i.pair,i.botName,k(i.close_timestamp),i.is_short===void 0||!i.is_short?"Long":"Short"];l.push(c)}return l}),d=_(()=>{const l=o.value.length>0?(1-50/o.value.length)*100:100;return{title:{text:"Trades log",show:a.showTitle},backgroundColor:"rgba(0, 0, 0, 0)",dataset:{dimensions:["date","profit"],source:o.value},tooltip:{trigger:"axis",formatter:s=>{const r=s[0].data[3]?` | ${s[0].data[3]}`:"";return`${s[0].data[2]} | ${s[0].data[5]} ${r}<br>${s[0].data[4]}<br>Profit ${s[0].data[1]} %`},axisPointer:{type:"line",label:{backgroundColor:"#6a7985"}}},xAxis:{type:"value",show:!1},yAxis:[{type:"value",name:h,splitLine:{show:!1},nameRotate:90,nameLocation:"middle",nameGap:30}],grid:{bottom:80},dataZoom:[{type:"inside",start:l,end:100},{show:!0,type:"slider",bottom:10,start:l,end:100}],visualMap:[{show:!0,seriesIndex:0,pieces:[{max:0,color:"#f84960"},{min:0,color:"#2ed191"}]}],series:[{type:"bar",name:h,barGap:"0%",barCategoryGap:"0%",animation:!1,label:{show:!0,position:"top",rotate:90,offset:[7.5,7.5],formatter:"{@[1]} %",color:t.chartTheme==="dark"?"#c2c2c2":"#3c3c3c"},encode:{x:0,y:1},itemStyle:{color:j}}]}});return{settingsStore:t,chartData:o,chartOptions:d}}});var q=function(){var t=this,o=t._self._c;return t._self._setupProxy,t.trades.length>0?o("v-chart",{attrs:{option:t.chartOptions,autoresize:"",theme:t.settingsStore.chartTheme}}):t._e()},B=[],N=P(H,q,B,!1,null,"32d5e410",null,null),J=N.exports;export{E as C,J as T};
//# sourceMappingURL=TradesLog.b7033fbb.js.map
